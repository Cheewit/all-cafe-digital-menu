import{u as P,r as h,c as M,j as e,S as R}from"./index-BPHvCye1.js";import{t as r}from"./haptics-C213ZN0-.js";import{M as B}from"./MediaDisplay-CT8zFVX_.js";import{u as D}from"./useFocusTrap-rNXr0wvg.js";const K=({isOpen:o,onClose:g,onConfirm:u,onAddAnother:b,item:t,quantity:n=1})=>{var x,m;const{getTranslation:s,getSizeTranslation:j,groupedProducts:y,selectedLanguage:v,isFestiveMode:N}=P(),d=h.useRef(null);if(D(d,o),h.useEffect(()=>{const l=f=>{document.body.style.overflow=f?"hidden":"";const p=document.getElementById(`screen-${R.Customization}`);p&&(p.style.overflow=f?"hidden":"")};return o&&l(!0),()=>{l(!1)}},[o]),!o||!t)return null;const w=()=>{r(),u()},c=()=>{r(),g()},C=()=>{r(),b()},a=y.find(l=>l.id===t.productGroupId),i=a?a.displayName(v):t.variant.Name_EN,T=(t.variant.Type||"").toLowerCase(),k=s(T)||t.variant.Type,A=j(t.selectedSize),E=t.selectedSweetness?`${t.selectedSweetness}%`:s("none"),L=t.selectedAddons.length>0?t.selectedAddons.map(l=>l.name).join(", "):s("none"),S=((x=a==null?void 0:a.brand)==null?void 0:x.toLowerCase().includes("all select"))||((m=a==null?void 0:a.brand)==null?void 0:m.toLowerCase().includes("allselect"))?"bg-gradient-to-b from-[#E0EAFC] to-[#CFDEF3]":"bg-gradient-to-b from-stone-200 to-stone-300",z=t.customizedPrice*n,F=N?"font-serif-festive tracking-wide":"heading-font";return M.createPortal(e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex justify-center items-center z-[999] p-4 animate-fadeIn",onClick:c,role:"dialog","aria-modal":"true","aria-labelledby":"confirm-order-modal-title",onTouchMove:l=>l.preventDefault(),children:e.jsxs("div",{ref:d,className:"glass-panel p-6 max-w-sm w-full flex flex-col max-h-[90vh] animate-scaleUpWiggle relative",onClick:l=>l.stopPropagation(),onTouchMove:l=>l.stopPropagation(),children:[e.jsxs("div",{className:"text-center mb-4 flex-shrink-0",children:[e.jsx("h2",{id:"confirm-order-modal-title",className:`text-2xl font-bold ${F}`,children:s("orderConfirmationTitle")}),e.jsx("p",{className:"text-sm text-[var(--bdl-text-secondary)] mt-1",children:s("orderConfirmationReview")})]}),e.jsxs("div",{className:"overflow-y-auto px-1 py-1 space-y-4 flex-1 min-h-0 filter-scroll",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:`w-24 h-32 rounded-lg ${S} overflow-hidden flex-shrink-0 shadow-md`,children:e.jsx(B,{url:t.variant.Image_URL,altText:i,type:"preview",priority:!0})}),e.jsxs("div",{className:"flex-grow space-y-1.5 text-sm",children:[e.jsx("p",{className:"font-bold text-lg leading-tight",children:i}),e.jsxs("p",{children:[e.jsxs("strong",{children:[s("typeLabel"),":"]})," ",k]}),e.jsxs("p",{children:[e.jsxs("strong",{children:[s("sizeLabel"),":"]})," ",A]}),e.jsxs("p",{children:[e.jsxs("strong",{children:[s("sweetnessLabel").replace(" ðŸ¯",""),":"]})," ",E]}),e.jsxs("p",{children:[e.jsxs("strong",{children:[s("addonLabel"),":"]})," ",L]}),n>1&&e.jsxs("p",{className:"text-[var(--day-accent)] font-bold pt-1",children:[s("quantityLabel"),": ",n]})]})]}),e.jsxs("div",{className:"border-2 border-dashed border-gray-400/50 rounded-lg p-3 text-center",children:[e.jsxs("span",{className:"font-semibold",children:[s("totalLabel"),":"]}),e.jsxs("span",{className:"font-bold text-2xl ml-2 text-[var(--day-accent)]",children:["à¸¿",z.toFixed(2)]})]}),e.jsx("div",{className:"p-3 bg-yellow-400/30 text-yellow-900 rounded-lg text-xs font-semibold border border-yellow-500/30",children:s("priceDisclaimer")})]}),e.jsxs("div",{className:"flex flex-col gap-3 mt-6 flex-shrink-0",children:[e.jsx("button",{onClick:w,className:"accent-button py-3 px-4 w-full",children:s("confirmAndGetQRButton")}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("button",{onClick:C,className:"secondary-button py-3 px-4",children:s("addAnotherItemButton")}),e.jsx("button",{onClick:c,className:"secondary-button py-3 px-4",children:s("backToEditButton")})]})]})]})}),document.body)};export{K as default};
