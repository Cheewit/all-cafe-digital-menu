const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/RatingModal-CmQeyBc8.js","assets/index-CEpxYsi3.js","assets/OutOfStockModal-DSCZcwLv.js","assets/useFocusTrap-CZE16F-E.js"])))=>i.map(i=>d[i]);
import{u as Wn,r as w,j as y,b as ft,S as Ce,_ as zn}from"./index-CEpxYsi3.js";import{M as Ge}from"./MediaDisplay-B8Gdx_aW.js";import{a as pt,t as mt}from"./haptics-C213ZN0-.js";const qe=({text:o,size:n=160,brand:e})=>{const{isFestiveMode:t}=Wn(),s=w.useRef(null),l=w.useRef(null),a=c=>{if(c)for(;c.firstChild;)c.removeChild(c.firstChild)};w.useEffect(()=>{const c=s.current;if(!c)return;if(typeof QRCode>"u"){a(c);const m=document.createElement("p");m.className="text-red-500 text-center p-2 text-xs",m.textContent="QR Library Error",c.appendChild(m);return}const u=String(o??"");if(l.current){if(l.current.clear(),u)try{l.current.makeCode(u)}catch{}}else if(a(c),u)try{l.current=new QRCode(c,{text:u,width:n,height:n,colorDark:"#000000",colorLight:"#ffffff",correctLevel:QRCode.CorrectLevel.H})}catch(m){console.error("Error generating QR code:",m)}const f=c.querySelector("img");f&&(f.style.width="100%",f.style.height="100%",f.style.objectFit="contain");const p=c.querySelector("canvas");p&&(p.style.width="100%",p.style.height="100%",p.style.objectFit="contain")},[o,n]);const d=w.useMemo(()=>{const c=(e||"").toLowerCase();return c.includes("all select")||c.includes("allselect")?"https://i.postimg.cc/jSMh7QYM/Untitled_design.jpg":t?"https://i.postimg.cc/ydk08yw2/chritmas-logo.png":"https://i.postimg.cc/qgfsNBYW/all_cafe_logo.png"},[e,t]);return y.jsxs("div",{className:"relative w-full h-full flex items-center justify-center",children:[y.jsx("div",{ref:s,className:"flex justify-center items-center bg-white overflow-hidden w-full h-full"}),o&&y.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:y.jsx("div",{className:"bg-white rounded-lg p-1 shadow-sm border border-stone-100 flex items-center justify-center",style:{width:"22%",height:"22%"},children:y.jsx("img",{src:d,alt:"Logo",className:"w-full h-full object-contain"})})})]})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let gt,ht;function yt(){return{geminiUrl:gt,vertexUrl:ht}}function Tt(o,n,e){var t,s,l;if(!(!((t=o.httpOptions)===null||t===void 0)&&t.baseUrl)){const a=yt();return o.vertexai?(s=a.vertexUrl)!==null&&s!==void 0?s:n:(l=a.geminiUrl)!==null&&l!==void 0?l:e}return o.httpOptions.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class re{}function C(o,n){const e=/\{([^}]+)\}/g;return o.replace(e,(t,s)=>{if(Object.prototype.hasOwnProperty.call(n,s)){const l=n[s];return l!=null?String(l):""}else throw new Error(`Key '${s}' not found in valueMap.`)})}function r(o,n,e){for(let l=0;l<n.length-1;l++){const a=n[l];if(a.endsWith("[]")){const d=a.slice(0,-2);if(!(d in o))if(Array.isArray(e))o[d]=Array.from({length:e.length},()=>({}));else throw new Error(`Value must be a list given an array path ${a}`);if(Array.isArray(o[d])){const c=o[d];if(Array.isArray(e))for(let u=0;u<c.length;u++){const f=c[u];r(f,n.slice(l+1),e[u])}else for(const u of c)r(u,n.slice(l+1),e)}return}else if(a.endsWith("[0]")){const d=a.slice(0,-3);d in o||(o[d]=[{}]);const c=o[d];r(c[0],n.slice(l+1),e);return}(!o[a]||typeof o[a]!="object")&&(o[a]={}),o=o[a]}const t=n[n.length-1],s=o[t];if(s!==void 0){if(!e||typeof e=="object"&&Object.keys(e).length===0||e===s)return;if(typeof s=="object"&&typeof e=="object"&&s!==null&&e!==null)Object.assign(s,e);else throw new Error(`Cannot set value for an existing key. Key: ${t}`)}else o[t]=e}function i(o,n){try{if(n.length===1&&n[0]==="_self")return o;for(let e=0;e<n.length;e++){if(typeof o!="object"||o===null)return;const t=n[e];if(t.endsWith("[]")){const s=t.slice(0,-2);if(s in o){const l=o[s];return Array.isArray(l)?l.map(a=>i(a,n.slice(e+1))):void 0}else return}else o=o[t]}return o}catch(e){if(e instanceof TypeError)return;throw e}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function N(o,n){if(!n||typeof n!="string")throw new Error("model is required and must be a string");if(o.isVertexAI()){if(n.startsWith("publishers/")||n.startsWith("projects/")||n.startsWith("models/"))return n;if(n.indexOf("/")>=0){const e=n.split("/",2);return`publishers/${e[0]}/models/${e[1]}`}else return`publishers/google/models/${n}`}else return n.startsWith("models/")||n.startsWith("tunedModels/")?n:`models/${n}`}function On(o,n){const e=N(o,n);return e?e.startsWith("publishers/")&&o.isVertexAI()?`projects/${o.getProject()}/locations/${o.getLocation()}/${e}`:e.startsWith("models/")&&o.isVertexAI()?`projects/${o.getProject()}/locations/${o.getLocation()}/publishers/google/${e}`:e:""}function Qn(o,n){return Array.isArray(n)?n.map(e=>fe(o,e)):[fe(o,n)]}function fe(o,n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function Ct(o,n){const e=fe(o,n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function vt(o,n){const e=fe(o,n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Be(o,n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function Xn(o,n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>Be(o,e)):[Be(o,n)]}function Ee(o){return o!=null&&typeof o=="object"&&"parts"in o&&Array.isArray(o.parts)}function He(o){return o!=null&&typeof o=="object"&&"functionCall"in o}function be(o){return o!=null&&typeof o=="object"&&"functionResponse"in o}function q(o,n){if(n==null)throw new Error("ContentUnion is required");return Ee(n)?n:{role:"user",parts:Xn(o,n)}}function Zn(o,n){if(!n)return[];if(o.isVertexAI()&&Array.isArray(n))return n.flatMap(e=>{const t=q(o,e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]});if(o.isVertexAI()){const e=q(o,n);return e.parts&&e.parts.length>0&&e.parts[0].text!==void 0?[e.parts[0].text]:[]}return Array.isArray(n)?n.map(e=>q(o,e)):[q(o,n)]}function X(o,n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(He(n)||be(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[q(o,n)]}const e=[],t=[],s=Ee(n[0]);for(const l of n){const a=Ee(l);if(a!=s)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(l);else{if(He(l)||be(l))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(l)}}return s||e.push({role:"user",parts:Xn(o,t)}),e}function jn(o,n){return n}function et(o,n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function me(o,n){return n}function ge(o,n){if(!Array.isArray(n))throw new Error("tool is required and must be an array of Tools");return n}function Et(o,n,e,t=1){const s=!n.startsWith(`${e}/`)&&n.split("/").length===t;return o.isVertexAI()?n.startsWith("projects/")?n:n.startsWith("locations/")?`projects/${o.getProject()}/${n}`:n.startsWith(`${e}/`)?`projects/${o.getProject()}/locations/${o.getLocation()}/${n}`:s?`projects/${o.getProject()}/locations/${o.getLocation()}/${e}/${n}`:n:s?`${e}/${n}`:n}function Z(o,n){if(typeof n!="string")throw new Error("name must be a string");return Et(o,n,"cachedContents")}function nt(o,n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function j(o,n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}function _t(o){return o!=null&&typeof o=="object"&&"name"in o}function St(o){return o!=null&&typeof o=="object"&&"video"in o}function It(o){return o!=null&&typeof o=="object"&&"uri"in o}function tt(o,n){var e;let t;if(_t(n)&&(t=n.name),!(It(n)&&(t=n.uri,t===void 0))&&!(St(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const l=t.split("files/")[1].match(/[a-z0-9]+/);if(l===null)throw new Error(`Could not extract file name from URI ${t}`);t=l[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function ot(o,n){let e;return o.isVertexAI()?e=n?"publishers/google/models":"models":e=n?"models":"tunedModels",e}function it(o,n){for(const e of["models","tunedModels","publisherModels"])if(xt(n,e))return n[e];return[]}function xt(o,n){return o!==null&&typeof o=="object"&&n in o}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function At(o,n){const e={};if(i(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=i(n,["data"]);t!=null&&r(e,["data"],t);const s=i(n,["mimeType"]);return s!=null&&r(e,["mimeType"],s),e}function Mt(o,n){const e={};if(i(n,["videoMetadata"])!==void 0)throw new Error("videoMetadata parameter is not supported in Gemini API.");const t=i(n,["thought"]);t!=null&&r(e,["thought"],t);const s=i(n,["inlineData"]);s!=null&&r(e,["inlineData"],At(o,s));const l=i(n,["codeExecutionResult"]);l!=null&&r(e,["codeExecutionResult"],l);const a=i(n,["executableCode"]);a!=null&&r(e,["executableCode"],a);const d=i(n,["fileData"]);d!=null&&r(e,["fileData"],d);const c=i(n,["functionCall"]);c!=null&&r(e,["functionCall"],c);const u=i(n,["functionResponse"]);u!=null&&r(e,["functionResponse"],u);const f=i(n,["text"]);return f!=null&&r(e,["text"],f),e}function Je(o,n){const e={},t=i(n,["parts"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(a=>Mt(o,a))),r(e,["parts"],l)}const s=i(n,["role"]);return s!=null&&r(e,["role"],s),e}function Rt(){return{}}function wt(o,n){const e={},t=i(n,["mode"]);t!=null&&r(e,["mode"],t);const s=i(n,["dynamicThreshold"]);return s!=null&&r(e,["dynamicThreshold"],s),e}function Pt(o,n){const e={},t=i(n,["dynamicRetrievalConfig"]);return t!=null&&r(e,["dynamicRetrievalConfig"],wt(o,t)),e}function Nt(o,n){const e={};if(i(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");i(n,["googleSearch"])!=null&&r(e,["googleSearch"],Rt());const s=i(n,["googleSearchRetrieval"]);if(s!=null&&r(e,["googleSearchRetrieval"],Pt(o,s)),i(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(i(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");const l=i(n,["codeExecution"]);l!=null&&r(e,["codeExecution"],l);const a=i(n,["functionDeclarations"]);return a!=null&&r(e,["functionDeclarations"],a),e}function Dt(o,n){const e={},t=i(n,["mode"]);t!=null&&r(e,["mode"],t);const s=i(n,["allowedFunctionNames"]);return s!=null&&r(e,["allowedFunctionNames"],s),e}function Vt(o,n){const e={},t=i(n,["functionCallingConfig"]);if(t!=null&&r(e,["functionCallingConfig"],Dt(o,t)),i(n,["retrievalConfig"])!==void 0)throw new Error("retrievalConfig parameter is not supported in Gemini API.");return e}function Lt(o,n,e){const t={},s=i(n,["ttl"]);e!==void 0&&s!=null&&r(e,["ttl"],s);const l=i(n,["expireTime"]);e!==void 0&&l!=null&&r(e,["expireTime"],l);const a=i(n,["displayName"]);e!==void 0&&a!=null&&r(e,["displayName"],a);const d=i(n,["contents"]);if(e!==void 0&&d!=null){let p=X(o,d);Array.isArray(p)&&(p=p.map(m=>Je(o,m))),r(e,["contents"],p)}const c=i(n,["systemInstruction"]);e!==void 0&&c!=null&&r(e,["systemInstruction"],Je(o,q(o,c)));const u=i(n,["tools"]);if(e!==void 0&&u!=null){let p=u;Array.isArray(p)&&(p=p.map(m=>Nt(o,m))),r(e,["tools"],p)}const f=i(n,["toolConfig"]);return e!==void 0&&f!=null&&r(e,["toolConfig"],Vt(o,f)),t}function Ut(o,n){const e={},t=i(n,["model"]);t!=null&&r(e,["model"],On(o,t));const s=i(n,["config"]);return s!=null&&r(e,["config"],Lt(o,s,e)),e}function Ft(o,n){const e={},t=i(n,["name"]);t!=null&&r(e,["_url","name"],Z(o,t));const s=i(n,["config"]);return s!=null&&r(e,["config"],s),e}function kt(o,n){const e={},t=i(n,["name"]);t!=null&&r(e,["_url","name"],Z(o,t));const s=i(n,["config"]);return s!=null&&r(e,["config"],s),e}function Gt(o,n,e){const t={},s=i(n,["ttl"]);e!==void 0&&s!=null&&r(e,["ttl"],s);const l=i(n,["expireTime"]);return e!==void 0&&l!=null&&r(e,["expireTime"],l),t}function qt(o,n){const e={},t=i(n,["name"]);t!=null&&r(e,["_url","name"],Z(o,t));const s=i(n,["config"]);return s!=null&&r(e,["config"],Gt(o,s,e)),e}function Bt(o,n,e){const t={},s=i(n,["pageSize"]);e!==void 0&&s!=null&&r(e,["_query","pageSize"],s);const l=i(n,["pageToken"]);return e!==void 0&&l!=null&&r(e,["_query","pageToken"],l),t}function Ht(o,n){const e={},t=i(n,["config"]);return t!=null&&r(e,["config"],Bt(o,t,e)),e}function bt(o,n){const e={},t=i(n,["displayName"]);t!=null&&r(e,["displayName"],t);const s=i(n,["data"]);s!=null&&r(e,["data"],s);const l=i(n,["mimeType"]);return l!=null&&r(e,["mimeType"],l),e}function Jt(o,n){const e={},t=i(n,["videoMetadata"]);t!=null&&r(e,["videoMetadata"],t);const s=i(n,["thought"]);s!=null&&r(e,["thought"],s);const l=i(n,["inlineData"]);l!=null&&r(e,["inlineData"],bt(o,l));const a=i(n,["codeExecutionResult"]);a!=null&&r(e,["codeExecutionResult"],a);const d=i(n,["executableCode"]);d!=null&&r(e,["executableCode"],d);const c=i(n,["fileData"]);c!=null&&r(e,["fileData"],c);const u=i(n,["functionCall"]);u!=null&&r(e,["functionCall"],u);const f=i(n,["functionResponse"]);f!=null&&r(e,["functionResponse"],f);const p=i(n,["text"]);return p!=null&&r(e,["text"],p),e}function $e(o,n){const e={},t=i(n,["parts"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(a=>Jt(o,a))),r(e,["parts"],l)}const s=i(n,["role"]);return s!=null&&r(e,["role"],s),e}function $t(){return{}}function Yt(o,n){const e={},t=i(n,["mode"]);t!=null&&r(e,["mode"],t);const s=i(n,["dynamicThreshold"]);return s!=null&&r(e,["dynamicThreshold"],s),e}function Kt(o,n){const e={},t=i(n,["dynamicRetrievalConfig"]);return t!=null&&r(e,["dynamicRetrievalConfig"],Yt(o,t)),e}function Wt(){return{}}function zt(o,n){const e={},t=i(n,["apiKeyString"]);return t!=null&&r(e,["apiKeyString"],t),e}function Ot(o,n){const e={},t=i(n,["apiKeyConfig"]);t!=null&&r(e,["apiKeyConfig"],zt(o,t));const s=i(n,["authType"]);s!=null&&r(e,["authType"],s);const l=i(n,["googleServiceAccountConfig"]);l!=null&&r(e,["googleServiceAccountConfig"],l);const a=i(n,["httpBasicAuthConfig"]);a!=null&&r(e,["httpBasicAuthConfig"],a);const d=i(n,["oauthConfig"]);d!=null&&r(e,["oauthConfig"],d);const c=i(n,["oidcConfig"]);return c!=null&&r(e,["oidcConfig"],c),e}function Qt(o,n){const e={},t=i(n,["authConfig"]);return t!=null&&r(e,["authConfig"],Ot(o,t)),e}function Xt(o,n){const e={},t=i(n,["retrieval"]);t!=null&&r(e,["retrieval"],t),i(n,["googleSearch"])!=null&&r(e,["googleSearch"],$t());const l=i(n,["googleSearchRetrieval"]);l!=null&&r(e,["googleSearchRetrieval"],Kt(o,l)),i(n,["enterpriseWebSearch"])!=null&&r(e,["enterpriseWebSearch"],Wt());const d=i(n,["googleMaps"]);d!=null&&r(e,["googleMaps"],Qt(o,d));const c=i(n,["codeExecution"]);c!=null&&r(e,["codeExecution"],c);const u=i(n,["functionDeclarations"]);return u!=null&&r(e,["functionDeclarations"],u),e}function Zt(o,n){const e={},t=i(n,["mode"]);t!=null&&r(e,["mode"],t);const s=i(n,["allowedFunctionNames"]);return s!=null&&r(e,["allowedFunctionNames"],s),e}function jt(o,n){const e={},t=i(n,["latitude"]);t!=null&&r(e,["latitude"],t);const s=i(n,["longitude"]);return s!=null&&r(e,["longitude"],s),e}function eo(o,n){const e={},t=i(n,["latLng"]);return t!=null&&r(e,["latLng"],jt(o,t)),e}function no(o,n){const e={},t=i(n,["functionCallingConfig"]);t!=null&&r(e,["functionCallingConfig"],Zt(o,t));const s=i(n,["retrievalConfig"]);return s!=null&&r(e,["retrievalConfig"],eo(o,s)),e}function to(o,n,e){const t={},s=i(n,["ttl"]);e!==void 0&&s!=null&&r(e,["ttl"],s);const l=i(n,["expireTime"]);e!==void 0&&l!=null&&r(e,["expireTime"],l);const a=i(n,["displayName"]);e!==void 0&&a!=null&&r(e,["displayName"],a);const d=i(n,["contents"]);if(e!==void 0&&d!=null){let p=X(o,d);Array.isArray(p)&&(p=p.map(m=>$e(o,m))),r(e,["contents"],p)}const c=i(n,["systemInstruction"]);e!==void 0&&c!=null&&r(e,["systemInstruction"],$e(o,q(o,c)));const u=i(n,["tools"]);if(e!==void 0&&u!=null){let p=u;Array.isArray(p)&&(p=p.map(m=>Xt(o,m))),r(e,["tools"],p)}const f=i(n,["toolConfig"]);return e!==void 0&&f!=null&&r(e,["toolConfig"],no(o,f)),t}function oo(o,n){const e={},t=i(n,["model"]);t!=null&&r(e,["model"],On(o,t));const s=i(n,["config"]);return s!=null&&r(e,["config"],to(o,s,e)),e}function io(o,n){const e={},t=i(n,["name"]);t!=null&&r(e,["_url","name"],Z(o,t));const s=i(n,["config"]);return s!=null&&r(e,["config"],s),e}function so(o,n){const e={},t=i(n,["name"]);t!=null&&r(e,["_url","name"],Z(o,t));const s=i(n,["config"]);return s!=null&&r(e,["config"],s),e}function ro(o,n,e){const t={},s=i(n,["ttl"]);e!==void 0&&s!=null&&r(e,["ttl"],s);const l=i(n,["expireTime"]);return e!==void 0&&l!=null&&r(e,["expireTime"],l),t}function lo(o,n){const e={},t=i(n,["name"]);t!=null&&r(e,["_url","name"],Z(o,t));const s=i(n,["config"]);return s!=null&&r(e,["config"],ro(o,s,e)),e}function ao(o,n,e){const t={},s=i(n,["pageSize"]);e!==void 0&&s!=null&&r(e,["_query","pageSize"],s);const l=i(n,["pageToken"]);return e!==void 0&&l!=null&&r(e,["_query","pageToken"],l),t}function uo(o,n){const e={},t=i(n,["config"]);return t!=null&&r(e,["config"],ao(o,t,e)),e}function de(o,n){const e={},t=i(n,["name"]);t!=null&&r(e,["name"],t);const s=i(n,["displayName"]);s!=null&&r(e,["displayName"],s);const l=i(n,["model"]);l!=null&&r(e,["model"],l);const a=i(n,["createTime"]);a!=null&&r(e,["createTime"],a);const d=i(n,["updateTime"]);d!=null&&r(e,["updateTime"],d);const c=i(n,["expireTime"]);c!=null&&r(e,["expireTime"],c);const u=i(n,["usageMetadata"]);return u!=null&&r(e,["usageMetadata"],u),e}function co(){return{}}function fo(o,n){const e={},t=i(n,["nextPageToken"]);t!=null&&r(e,["nextPageToken"],t);const s=i(n,["cachedContents"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(a=>de(o,a))),r(e,["cachedContents"],l)}return e}function ce(o,n){const e={},t=i(n,["name"]);t!=null&&r(e,["name"],t);const s=i(n,["displayName"]);s!=null&&r(e,["displayName"],s);const l=i(n,["model"]);l!=null&&r(e,["model"],l);const a=i(n,["createTime"]);a!=null&&r(e,["createTime"],a);const d=i(n,["updateTime"]);d!=null&&r(e,["updateTime"],d);const c=i(n,["expireTime"]);c!=null&&r(e,["expireTime"],c);const u=i(n,["usageMetadata"]);return u!=null&&r(e,["usageMetadata"],u),e}function po(){return{}}function mo(o,n){const e={},t=i(n,["nextPageToken"]);t!=null&&r(e,["nextPageToken"],t);const s=i(n,["cachedContents"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(a=>ce(o,a))),r(e,["cachedContents"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var oe;(function(o){o.PAGED_ITEM_BATCH_JOBS="batchJobs",o.PAGED_ITEM_MODELS="models",o.PAGED_ITEM_TUNING_JOBS="tuningJobs",o.PAGED_ITEM_FILES="files",o.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(oe||(oe={}));class he{constructor(n,e,t,s){this.pageInternal=[],this.paramsInternal={},this.requestInternal=e,this.init(n,t,s)}init(n,e,t){var s,l;this.nameInternal=n,this.pageInternal=e[this.nameInternal]||[],this.idxInternal=0;let a={config:{}};t?typeof t=="object"?a=Object.assign({},t):a=t:a={config:{}},a.config&&(a.config.pageToken=e.nextPageToken),this.paramsInternal=a,this.pageInternalSize=(l=(s=a.config)===null||s===void 0?void 0:s.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(n){this.init(this.nameInternal,n,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(n){return this.pageInternal[n]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const n=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:n,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const n=await this.requestInternal(this.params);return this.initNextPage(n),this.page}hasNextPage(){var n;return((n=this.params.config)===null||n===void 0?void 0:n.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Ye;(function(o){o.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",o.OUTCOME_OK="OUTCOME_OK",o.OUTCOME_FAILED="OUTCOME_FAILED",o.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Ye||(Ye={}));var Ke;(function(o){o.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",o.PYTHON="PYTHON"})(Ke||(Ke={}));var We;(function(o){o.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",o.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",o.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",o.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",o.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",o.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(We||(We={}));var ze;(function(o){o.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",o.SEVERITY="SEVERITY",o.PROBABILITY="PROBABILITY"})(ze||(ze={}));var Oe;(function(o){o.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",o.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",o.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",o.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",o.BLOCK_NONE="BLOCK_NONE",o.OFF="OFF"})(Oe||(Oe={}));var Qe;(function(o){o.MODE_UNSPECIFIED="MODE_UNSPECIFIED",o.MODE_DYNAMIC="MODE_DYNAMIC"})(Qe||(Qe={}));var Xe;(function(o){o.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",o.NO_AUTH="NO_AUTH",o.API_KEY_AUTH="API_KEY_AUTH",o.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",o.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",o.OAUTH="OAUTH",o.OIDC_AUTH="OIDC_AUTH"})(Xe||(Xe={}));var Ze;(function(o){o.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",o.STRING="STRING",o.NUMBER="NUMBER",o.INTEGER="INTEGER",o.BOOLEAN="BOOLEAN",o.ARRAY="ARRAY",o.OBJECT="OBJECT"})(Ze||(Ze={}));var je;(function(o){o.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",o.STOP="STOP",o.MAX_TOKENS="MAX_TOKENS",o.SAFETY="SAFETY",o.RECITATION="RECITATION",o.LANGUAGE="LANGUAGE",o.OTHER="OTHER",o.BLOCKLIST="BLOCKLIST",o.PROHIBITED_CONTENT="PROHIBITED_CONTENT",o.SPII="SPII",o.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",o.IMAGE_SAFETY="IMAGE_SAFETY"})(je||(je={}));var en;(function(o){o.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",o.NEGLIGIBLE="NEGLIGIBLE",o.LOW="LOW",o.MEDIUM="MEDIUM",o.HIGH="HIGH"})(en||(en={}));var nn;(function(o){o.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",o.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",o.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",o.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",o.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(nn||(nn={}));var tn;(function(o){o.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",o.SAFETY="SAFETY",o.OTHER="OTHER",o.BLOCKLIST="BLOCKLIST",o.PROHIBITED_CONTENT="PROHIBITED_CONTENT"})(tn||(tn={}));var on;(function(o){o.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",o.ON_DEMAND="ON_DEMAND",o.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(on||(on={}));var se;(function(o){o.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",o.TEXT="TEXT",o.IMAGE="IMAGE",o.AUDIO="AUDIO"})(se||(se={}));var sn;(function(o){o.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",o.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",o.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",o.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(sn||(sn={}));var _e;(function(o){o.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",o.JOB_STATE_QUEUED="JOB_STATE_QUEUED",o.JOB_STATE_PENDING="JOB_STATE_PENDING",o.JOB_STATE_RUNNING="JOB_STATE_RUNNING",o.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",o.JOB_STATE_FAILED="JOB_STATE_FAILED",o.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",o.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",o.JOB_STATE_PAUSED="JOB_STATE_PAUSED",o.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",o.JOB_STATE_UPDATING="JOB_STATE_UPDATING",o.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(_e||(_e={}));var rn;(function(o){o.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",o.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",o.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",o.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",o.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",o.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",o.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(rn||(rn={}));var ln;(function(o){o.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",o.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",o.BALANCED="BALANCED",o.PRIORITIZE_COST="PRIORITIZE_COST"})(ln||(ln={}));var an;(function(o){o.MODE_UNSPECIFIED="MODE_UNSPECIFIED",o.MODE_DYNAMIC="MODE_DYNAMIC"})(an||(an={}));var un;(function(o){o.MODE_UNSPECIFIED="MODE_UNSPECIFIED",o.AUTO="AUTO",o.ANY="ANY",o.NONE="NONE"})(un||(un={}));var dn;(function(o){o.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",o.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",o.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",o.BLOCK_NONE="BLOCK_NONE"})(dn||(dn={}));var cn;(function(o){o.DONT_ALLOW="DONT_ALLOW",o.ALLOW_ADULT="ALLOW_ADULT",o.ALLOW_ALL="ALLOW_ALL"})(cn||(cn={}));var fn;(function(o){o.auto="auto",o.en="en",o.ja="ja",o.ko="ko",o.hi="hi"})(fn||(fn={}));var pn;(function(o){o.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",o.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",o.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",o.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",o.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(pn||(pn={}));var mn;(function(o){o.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",o.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",o.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",o.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(mn||(mn={}));var gn;(function(o){o.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",o.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",o.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",o.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(gn||(gn={}));var hn;(function(o){o.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",o.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",o.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",o.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",o.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",o.EDIT_MODE_STYLE="EDIT_MODE_STYLE",o.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",o.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(hn||(hn={}));var yn;(function(o){o.STATE_UNSPECIFIED="STATE_UNSPECIFIED",o.PROCESSING="PROCESSING",o.ACTIVE="ACTIVE",o.FAILED="FAILED"})(yn||(yn={}));var Tn;(function(o){o.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",o.UPLOADED="UPLOADED",o.GENERATED="GENERATED"})(Tn||(Tn={}));var Cn;(function(o){o.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",o.TEXT="TEXT",o.IMAGE="IMAGE",o.VIDEO="VIDEO",o.AUDIO="AUDIO",o.DOCUMENT="DOCUMENT"})(Cn||(Cn={}));var vn;(function(o){o.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",o.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",o.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(vn||(vn={}));var En;(function(o){o.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",o.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",o.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(En||(En={}));var _n;(function(o){o.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",o.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",o.NO_INTERRUPTION="NO_INTERRUPTION"})(_n||(_n={}));var Sn;(function(o){o.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",o.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",o.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Sn||(Sn={}));class le{get text(){var n,e,t,s,l,a,d,c;if(((s=(t=(e=(n=this.candidates)===null||n===void 0?void 0:n[0])===null||e===void 0?void 0:e.content)===null||t===void 0?void 0:t.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let u="",f=!1;const p=[];for(const m of(c=(d=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||d===void 0?void 0:d.parts)!==null&&c!==void 0?c:[]){for(const[g,h]of Object.entries(m))g!=="text"&&g!=="thought"&&(h!==null||h!==void 0)&&p.push(g);if(typeof m.text=="string"){if(typeof m.thought=="boolean"&&m.thought)continue;f=!0,u+=m.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),f?u:void 0}get data(){var n,e,t,s,l,a,d,c;if(((s=(t=(e=(n=this.candidates)===null||n===void 0?void 0:n[0])===null||e===void 0?void 0:e.content)===null||t===void 0?void 0:t.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let u="";const f=[];for(const p of(c=(d=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||d===void 0?void 0:d.parts)!==null&&c!==void 0?c:[]){for(const[m,g]of Object.entries(p))m!=="inlineData"&&(g!==null||g!==void 0)&&f.push(m);p.inlineData&&typeof p.inlineData.data=="string"&&(u+=atob(p.inlineData.data))}return f.length>0&&console.warn(`there are non-data parts ${f} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),u.length>0?btoa(u):void 0}get functionCalls(){var n,e,t,s,l,a,d,c;if(((s=(t=(e=(n=this.candidates)===null||n===void 0?void 0:n[0])===null||e===void 0?void 0:e.content)===null||t===void 0?void 0:t.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const u=(c=(d=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||d===void 0?void 0:d.parts)===null||c===void 0?void 0:c.filter(f=>f.functionCall).map(f=>f.functionCall).filter(f=>f!==void 0);if((u==null?void 0:u.length)!==0)return u}get executableCode(){var n,e,t,s,l,a,d,c,u;if(((s=(t=(e=(n=this.candidates)===null||n===void 0?void 0:n[0])===null||e===void 0?void 0:e.content)===null||t===void 0?void 0:t.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const f=(c=(d=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||d===void 0?void 0:d.parts)===null||c===void 0?void 0:c.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if((f==null?void 0:f.length)!==0)return(u=f==null?void 0:f[0])===null||u===void 0?void 0:u.code}get codeExecutionResult(){var n,e,t,s,l,a,d,c,u;if(((s=(t=(e=(n=this.candidates)===null||n===void 0?void 0:n[0])===null||e===void 0?void 0:e.content)===null||t===void 0?void 0:t.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const f=(c=(d=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||d===void 0?void 0:d.parts)===null||c===void 0?void 0:c.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if((f==null?void 0:f.length)!==0)return(u=f==null?void 0:f[0])===null||u===void 0?void 0:u.output}}class In{}class xn{}class go{}class ho{}class An{}class Mn{}class Rn{}class yo{}class wn{}class Pn{}class Nn{}class To{}class Se{constructor(n){const e={};for(const t of n.headers.entries())e[t[0]]=t[1];this.headers=e,this.responseInternal=n}json(){return this.responseInternal.json()}}class Co{}class vo{}class Eo{get text(){var n,e,t;let s="",l=!1;const a=[];for(const d of(t=(e=(n=this.serverContent)===null||n===void 0?void 0:n.modelTurn)===null||e===void 0?void 0:e.parts)!==null&&t!==void 0?t:[]){for(const[c,u]of Object.entries(d))c!=="text"&&c!=="thought"&&u!==null&&a.push(c);if(typeof d.text=="string"){if(typeof d.thought=="boolean"&&d.thought)continue;l=!0,s+=d.text}}return a.length>0&&console.warn(`there are non-text parts ${a} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?s:void 0}get data(){var n,e,t;let s="";const l=[];for(const a of(t=(e=(n=this.serverContent)===null||n===void 0?void 0:n.modelTurn)===null||e===void 0?void 0:e.parts)!==null&&t!==void 0?t:[]){for(const[d,c]of Object.entries(a))d!=="inlineData"&&c!==null&&l.push(d);a.inlineData&&typeof a.inlineData.data=="string"&&(s+=atob(a.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),s.length>0?btoa(s):void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _o extends re{constructor(n){super(),this.apiClient=n,this.list=async(e={})=>new he(oe.PAGED_ITEM_CACHED_CONTENTS,t=>this.listInternal(t),await this.listInternal(e),e)}async create(n){var e,t,s,l;let a,d="",c={};if(this.apiClient.isVertexAI()){const u=oo(this.apiClient,n);return d=C("cachedContents",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:d,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(t=n.config)===null||t===void 0?void 0:t.abortSignal}).then(f=>f.json()),a.then(f=>ce(this.apiClient,f))}else{const u=Ut(this.apiClient,n);return d=C("cachedContents",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:d,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=n.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=n.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>de(this.apiClient,f))}}async get(n){var e,t,s,l;let a,d="",c={};if(this.apiClient.isVertexAI()){const u=io(this.apiClient,n);return d=C("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:d,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(t=n.config)===null||t===void 0?void 0:t.abortSignal}).then(f=>f.json()),a.then(f=>ce(this.apiClient,f))}else{const u=Ft(this.apiClient,n);return d=C("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:d,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=n.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=n.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>de(this.apiClient,f))}}async delete(n){var e,t,s,l;let a,d="",c={};if(this.apiClient.isVertexAI()){const u=so(this.apiClient,n);return d=C("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:d,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(t=n.config)===null||t===void 0?void 0:t.abortSignal}).then(f=>f.json()),a.then(()=>{const f=po(),p=new Pn;return Object.assign(p,f),p})}else{const u=kt(this.apiClient,n);return d=C("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:d,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(s=n.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=n.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(()=>{const f=co(),p=new Pn;return Object.assign(p,f),p})}}async update(n){var e,t,s,l;let a,d="",c={};if(this.apiClient.isVertexAI()){const u=lo(this.apiClient,n);return d=C("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:d,queryParams:c,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(t=n.config)===null||t===void 0?void 0:t.abortSignal}).then(f=>f.json()),a.then(f=>ce(this.apiClient,f))}else{const u=qt(this.apiClient,n);return d=C("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:d,queryParams:c,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(s=n.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=n.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>de(this.apiClient,f))}}async listInternal(n){var e,t,s,l;let a,d="",c={};if(this.apiClient.isVertexAI()){const u=uo(this.apiClient,n);return d=C("cachedContents",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:d,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(t=n.config)===null||t===void 0?void 0:t.abortSignal}).then(f=>f.json()),a.then(f=>{const p=mo(this.apiClient,f),m=new Nn;return Object.assign(m,p),m})}else{const u=Ht(this.apiClient,n);return d=C("cachedContents",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:d,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=n.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=n.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>{const p=fo(this.apiClient,f),m=new Nn;return Object.assign(m,p),m})}}}function Dn(o){var n=typeof Symbol=="function"&&Symbol.iterator,e=n&&o[n],t=0;if(e)return e.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&t>=o.length&&(o=void 0),{value:o&&o[t++],done:!o}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function F(o){return this instanceof F?(this.v=o,this):new F(o)}function pe(o,n,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e.apply(o,n||[]),s,l=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",a),s[Symbol.asyncIterator]=function(){return this},s;function a(g){return function(h){return Promise.resolve(h).then(g,p)}}function d(g,h){t[g]&&(s[g]=function(T){return new Promise(function(v,S){l.push([g,T,v,S])>1||c(g,T)})},h&&(s[g]=h(s[g])))}function c(g,h){try{u(t[g](h))}catch(T){m(l[0][3],T)}}function u(g){g.value instanceof F?Promise.resolve(g.value.v).then(f,p):m(l[0][2],g)}function f(g){c("next",g)}function p(g){c("throw",g)}function m(g,h){g(h),l.shift(),l.length&&c(l[0][0],l[0][1])}}function Ie(o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=o[Symbol.asyncIterator],e;return n?n.call(o):(o=typeof Dn=="function"?Dn(o):o[Symbol.iterator](),e={},t("next"),t("throw"),t("return"),e[Symbol.asyncIterator]=function(){return this},e);function t(l){e[l]=o[l]&&function(a){return new Promise(function(d,c){a=o[l](a),s(d,c,a.done,a.value)})}}function s(l,a,d,c){Promise.resolve(c).then(function(u){l({value:u,done:d})},a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function So(o){var n;if(o.candidates==null||o.candidates.length===0)return!1;const e=(n=o.candidates[0])===null||n===void 0?void 0:n.content;return e===void 0?!1:st(e)}function st(o){if(o.parts===void 0||o.parts.length===0)return!1;for(const n of o.parts)if(n===void 0||Object.keys(n).length===0||n.text!==void 0&&n.text==="")return!1;return!0}function Io(o){if(o.length!==0){if(o[0].role!=="user")throw new Error("History must start with a user turn.");for(const n of o)if(n.role!=="user"&&n.role!=="model")throw new Error(`Role must be user or model, but got ${n.role}.`)}}function xo(o){if(o===void 0||o.length===0)return[];const n=[],e=o.length;let t=0,s=o[0];for(;t<e;)if(o[t].role==="user")s=o[t],t++;else{const l=[];let a=!0;for(;t<e&&o[t].role==="model";)l.push(o[t]),a&&!st(o[t])&&(a=!1),t++;a&&(n.push(s),n.push(...l))}return n}class Ao{constructor(n,e){this.modelsModule=n,this.apiClient=e}create(n){return new Mo(this.apiClient,this.modelsModule,n.model,n.config,n.history)}}class Mo{constructor(n,e,t,s={},l=[]){this.apiClient=n,this.modelsModule=e,this.model=t,this.config=s,this.history=l,this.sendPromise=Promise.resolve(),Io(l)}async sendMessage(n){var e;await this.sendPromise;const t=q(this.apiClient,n.message),s=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(t),config:(e=n.config)!==null&&e!==void 0?e:this.config});return this.sendPromise=(async()=>{var l,a;const c=(a=(l=(await s).candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content,u=c?[c]:[];this.recordHistory(t,u)})(),await this.sendPromise,s}async sendMessageStream(n){var e;await this.sendPromise;const t=q(this.apiClient,n.message),s=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(t),config:(e=n.config)!==null&&e!==void 0?e:this.config});this.sendPromise=s.then(()=>{}).catch(()=>{});const l=await s;return this.processStreamResponse(l,t)}getHistory(n=!1){return n?xo(this.history):this.history}processStreamResponse(n,e){var t,s;return pe(this,arguments,function*(){var a,d,c,u;const f=[];try{for(var p=!0,m=Ie(n),g;g=yield F(m.next()),a=g.done,!a;p=!0){u=g.value,p=!1;const h=u;if(So(h)){const T=(s=(t=h.candidates)===null||t===void 0?void 0:t[0])===null||s===void 0?void 0:s.content;T!==void 0&&f.push(T)}yield yield F(h)}}catch(h){d={error:h}}finally{try{!p&&!a&&(c=m.return)&&(yield F(c.call(m)))}finally{if(d)throw d.error}}this.recordHistory(e,f)})}recordHistory(n,e){let t=[];e.length>0&&e.every(s=>s.role==="model")?t=e:t.push({role:"model",parts:[]}),this.history.push(n),this.history.push(...t)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ro(o,n,e){const t={},s=i(n,["pageSize"]);e!==void 0&&s!=null&&r(e,["_query","pageSize"],s);const l=i(n,["pageToken"]);return e!==void 0&&l!=null&&r(e,["_query","pageToken"],l),t}function wo(o,n){const e={},t=i(n,["config"]);return t!=null&&r(e,["config"],Ro(o,t,e)),e}function Po(o,n){const e={},t=i(n,["details"]);t!=null&&r(e,["details"],t);const s=i(n,["message"]);s!=null&&r(e,["message"],s);const l=i(n,["code"]);return l!=null&&r(e,["code"],l),e}function No(o,n){const e={},t=i(n,["name"]);t!=null&&r(e,["name"],t);const s=i(n,["displayName"]);s!=null&&r(e,["displayName"],s);const l=i(n,["mimeType"]);l!=null&&r(e,["mimeType"],l);const a=i(n,["sizeBytes"]);a!=null&&r(e,["sizeBytes"],a);const d=i(n,["createTime"]);d!=null&&r(e,["createTime"],d);const c=i(n,["expirationTime"]);c!=null&&r(e,["expirationTime"],c);const u=i(n,["updateTime"]);u!=null&&r(e,["updateTime"],u);const f=i(n,["sha256Hash"]);f!=null&&r(e,["sha256Hash"],f);const p=i(n,["uri"]);p!=null&&r(e,["uri"],p);const m=i(n,["downloadUri"]);m!=null&&r(e,["downloadUri"],m);const g=i(n,["state"]);g!=null&&r(e,["state"],g);const h=i(n,["source"]);h!=null&&r(e,["source"],h);const T=i(n,["videoMetadata"]);T!=null&&r(e,["videoMetadata"],T);const v=i(n,["error"]);return v!=null&&r(e,["error"],Po(o,v)),e}function Do(o,n){const e={},t=i(n,["file"]);t!=null&&r(e,["file"],No(o,t));const s=i(n,["config"]);return s!=null&&r(e,["config"],s),e}function Vo(o,n){const e={},t=i(n,["name"]);t!=null&&r(e,["_url","file"],tt(o,t));const s=i(n,["config"]);return s!=null&&r(e,["config"],s),e}function Lo(o,n){const e={},t=i(n,["name"]);t!=null&&r(e,["_url","file"],tt(o,t));const s=i(n,["config"]);return s!=null&&r(e,["config"],s),e}function Uo(o,n){const e={},t=i(n,["details"]);t!=null&&r(e,["details"],t);const s=i(n,["message"]);s!=null&&r(e,["message"],s);const l=i(n,["code"]);return l!=null&&r(e,["code"],l),e}function xe(o,n){const e={},t=i(n,["name"]);t!=null&&r(e,["name"],t);const s=i(n,["displayName"]);s!=null&&r(e,["displayName"],s);const l=i(n,["mimeType"]);l!=null&&r(e,["mimeType"],l);const a=i(n,["sizeBytes"]);a!=null&&r(e,["sizeBytes"],a);const d=i(n,["createTime"]);d!=null&&r(e,["createTime"],d);const c=i(n,["expirationTime"]);c!=null&&r(e,["expirationTime"],c);const u=i(n,["updateTime"]);u!=null&&r(e,["updateTime"],u);const f=i(n,["sha256Hash"]);f!=null&&r(e,["sha256Hash"],f);const p=i(n,["uri"]);p!=null&&r(e,["uri"],p);const m=i(n,["downloadUri"]);m!=null&&r(e,["downloadUri"],m);const g=i(n,["state"]);g!=null&&r(e,["state"],g);const h=i(n,["source"]);h!=null&&r(e,["source"],h);const T=i(n,["videoMetadata"]);T!=null&&r(e,["videoMetadata"],T);const v=i(n,["error"]);return v!=null&&r(e,["error"],Uo(o,v)),e}function Fo(o,n){const e={},t=i(n,["nextPageToken"]);t!=null&&r(e,["nextPageToken"],t);const s=i(n,["files"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(a=>xe(o,a))),r(e,["files"],l)}return e}function ko(){return{}}function Go(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class qo extends re{constructor(n){super(),this.apiClient=n,this.list=async(e={})=>new he(oe.PAGED_ITEM_FILES,t=>this.listInternal(t),await this.listInternal(e),e)}async upload(n){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(n.file,n.config).then(e=>xe(this.apiClient,e))}async download(n){await this.apiClient.downloadFile(n)}async listInternal(n){var e,t;let s,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=wo(this.apiClient,n);return l=C("files",d._url),a=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(t=n.config)===null||t===void 0?void 0:t.abortSignal}).then(c=>c.json()),s.then(c=>{const u=Fo(this.apiClient,c),f=new To;return Object.assign(f,u),f})}}async createInternal(n){var e,t;let s,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Do(this.apiClient,n);return l=C("upload/v1beta/files",d._url),a=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(t=n.config)===null||t===void 0?void 0:t.abortSignal}).then(c=>c.json()),s.then(()=>{const c=ko(),u=new Co;return Object.assign(u,c),u})}}async get(n){var e,t;let s,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Vo(this.apiClient,n);return l=C("files/{file}",d._url),a=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(t=n.config)===null||t===void 0?void 0:t.abortSignal}).then(c=>c.json()),s.then(c=>xe(this.apiClient,c))}}async delete(n){var e,t;let s,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Lo(this.apiClient,n);return l=C("files/{file}",d._url),a=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(t=n.config)===null||t===void 0?void 0:t.abortSignal}).then(c=>c.json()),s.then(()=>{const c=Go(),u=new vo;return Object.assign(u,c),u})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Bo(o,n){const e={};if(i(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=i(n,["data"]);t!=null&&r(e,["data"],t);const s=i(n,["mimeType"]);return s!=null&&r(e,["mimeType"],s),e}function Ho(o,n){const e={},t=i(n,["displayName"]);t!=null&&r(e,["displayName"],t);const s=i(n,["data"]);s!=null&&r(e,["data"],s);const l=i(n,["mimeType"]);return l!=null&&r(e,["mimeType"],l),e}function bo(o,n){const e={};if(i(n,["videoMetadata"])!==void 0)throw new Error("videoMetadata parameter is not supported in Gemini API.");const t=i(n,["thought"]);t!=null&&r(e,["thought"],t);const s=i(n,["inlineData"]);s!=null&&r(e,["inlineData"],Bo(o,s));const l=i(n,["codeExecutionResult"]);l!=null&&r(e,["codeExecutionResult"],l);const a=i(n,["executableCode"]);a!=null&&r(e,["executableCode"],a);const d=i(n,["fileData"]);d!=null&&r(e,["fileData"],d);const c=i(n,["functionCall"]);c!=null&&r(e,["functionCall"],c);const u=i(n,["functionResponse"]);u!=null&&r(e,["functionResponse"],u);const f=i(n,["text"]);return f!=null&&r(e,["text"],f),e}function Jo(o,n){const e={},t=i(n,["videoMetadata"]);t!=null&&r(e,["videoMetadata"],t);const s=i(n,["thought"]);s!=null&&r(e,["thought"],s);const l=i(n,["inlineData"]);l!=null&&r(e,["inlineData"],Ho(o,l));const a=i(n,["codeExecutionResult"]);a!=null&&r(e,["codeExecutionResult"],a);const d=i(n,["executableCode"]);d!=null&&r(e,["executableCode"],d);const c=i(n,["fileData"]);c!=null&&r(e,["fileData"],c);const u=i(n,["functionCall"]);u!=null&&r(e,["functionCall"],u);const f=i(n,["functionResponse"]);f!=null&&r(e,["functionResponse"],f);const p=i(n,["text"]);return p!=null&&r(e,["text"],p),e}function $o(o,n){const e={},t=i(n,["parts"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(a=>bo(o,a))),r(e,["parts"],l)}const s=i(n,["role"]);return s!=null&&r(e,["role"],s),e}function Yo(o,n){const e={},t=i(n,["parts"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(a=>Jo(o,a))),r(e,["parts"],l)}const s=i(n,["role"]);return s!=null&&r(e,["role"],s),e}function Ko(){return{}}function Wo(){return{}}function zo(o,n){const e={},t=i(n,["mode"]);t!=null&&r(e,["mode"],t);const s=i(n,["dynamicThreshold"]);return s!=null&&r(e,["dynamicThreshold"],s),e}function Oo(o,n){const e={},t=i(n,["mode"]);t!=null&&r(e,["mode"],t);const s=i(n,["dynamicThreshold"]);return s!=null&&r(e,["dynamicThreshold"],s),e}function Qo(o,n){const e={},t=i(n,["dynamicRetrievalConfig"]);return t!=null&&r(e,["dynamicRetrievalConfig"],zo(o,t)),e}function Xo(o,n){const e={},t=i(n,["dynamicRetrievalConfig"]);return t!=null&&r(e,["dynamicRetrievalConfig"],Oo(o,t)),e}function Zo(){return{}}function jo(o,n){const e={},t=i(n,["apiKeyString"]);return t!=null&&r(e,["apiKeyString"],t),e}function ei(o,n){const e={},t=i(n,["apiKeyConfig"]);t!=null&&r(e,["apiKeyConfig"],jo(o,t));const s=i(n,["authType"]);s!=null&&r(e,["authType"],s);const l=i(n,["googleServiceAccountConfig"]);l!=null&&r(e,["googleServiceAccountConfig"],l);const a=i(n,["httpBasicAuthConfig"]);a!=null&&r(e,["httpBasicAuthConfig"],a);const d=i(n,["oauthConfig"]);d!=null&&r(e,["oauthConfig"],d);const c=i(n,["oidcConfig"]);return c!=null&&r(e,["oidcConfig"],c),e}function ni(o,n){const e={},t=i(n,["authConfig"]);return t!=null&&r(e,["authConfig"],ei(o,t)),e}function ti(o,n){const e={};if(i(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");i(n,["googleSearch"])!=null&&r(e,["googleSearch"],Ko());const s=i(n,["googleSearchRetrieval"]);if(s!=null&&r(e,["googleSearchRetrieval"],Qo(o,s)),i(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(i(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");const l=i(n,["codeExecution"]);l!=null&&r(e,["codeExecution"],l);const a=i(n,["functionDeclarations"]);return a!=null&&r(e,["functionDeclarations"],a),e}function oi(o,n){const e={},t=i(n,["retrieval"]);t!=null&&r(e,["retrieval"],t),i(n,["googleSearch"])!=null&&r(e,["googleSearch"],Wo());const l=i(n,["googleSearchRetrieval"]);l!=null&&r(e,["googleSearchRetrieval"],Xo(o,l)),i(n,["enterpriseWebSearch"])!=null&&r(e,["enterpriseWebSearch"],Zo());const d=i(n,["googleMaps"]);d!=null&&r(e,["googleMaps"],ni(o,d));const c=i(n,["codeExecution"]);c!=null&&r(e,["codeExecution"],c);const u=i(n,["functionDeclarations"]);return u!=null&&r(e,["functionDeclarations"],u),e}function ii(o,n){const e={},t=i(n,["handle"]);if(t!=null&&r(e,["handle"],t),i(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function si(o,n){const e={},t=i(n,["handle"]);t!=null&&r(e,["handle"],t);const s=i(n,["transparent"]);return s!=null&&r(e,["transparent"],s),e}function Vn(){return{}}function Ln(){return{}}function ri(o,n){const e={},t=i(n,["disabled"]);t!=null&&r(e,["disabled"],t);const s=i(n,["startOfSpeechSensitivity"]);s!=null&&r(e,["startOfSpeechSensitivity"],s);const l=i(n,["endOfSpeechSensitivity"]);l!=null&&r(e,["endOfSpeechSensitivity"],l);const a=i(n,["prefixPaddingMs"]);a!=null&&r(e,["prefixPaddingMs"],a);const d=i(n,["silenceDurationMs"]);return d!=null&&r(e,["silenceDurationMs"],d),e}function li(o,n){const e={},t=i(n,["disabled"]);t!=null&&r(e,["disabled"],t);const s=i(n,["startOfSpeechSensitivity"]);s!=null&&r(e,["startOfSpeechSensitivity"],s);const l=i(n,["endOfSpeechSensitivity"]);l!=null&&r(e,["endOfSpeechSensitivity"],l);const a=i(n,["prefixPaddingMs"]);a!=null&&r(e,["prefixPaddingMs"],a);const d=i(n,["silenceDurationMs"]);return d!=null&&r(e,["silenceDurationMs"],d),e}function ai(o,n){const e={},t=i(n,["automaticActivityDetection"]);t!=null&&r(e,["automaticActivityDetection"],ri(o,t));const s=i(n,["activityHandling"]);s!=null&&r(e,["activityHandling"],s);const l=i(n,["turnCoverage"]);return l!=null&&r(e,["turnCoverage"],l),e}function ui(o,n){const e={},t=i(n,["automaticActivityDetection"]);t!=null&&r(e,["automaticActivityDetection"],li(o,t));const s=i(n,["activityHandling"]);s!=null&&r(e,["activityHandling"],s);const l=i(n,["turnCoverage"]);return l!=null&&r(e,["turnCoverage"],l),e}function di(o,n){const e={},t=i(n,["targetTokens"]);return t!=null&&r(e,["targetTokens"],t),e}function ci(o,n){const e={},t=i(n,["targetTokens"]);return t!=null&&r(e,["targetTokens"],t),e}function fi(o,n){const e={},t=i(n,["triggerTokens"]);t!=null&&r(e,["triggerTokens"],t);const s=i(n,["slidingWindow"]);return s!=null&&r(e,["slidingWindow"],di(o,s)),e}function pi(o,n){const e={},t=i(n,["triggerTokens"]);t!=null&&r(e,["triggerTokens"],t);const s=i(n,["slidingWindow"]);return s!=null&&r(e,["slidingWindow"],ci(o,s)),e}function mi(o,n,e){const t={},s=i(n,["generationConfig"]);e!==void 0&&s!=null&&r(e,["setup","generationConfig"],s);const l=i(n,["responseModalities"]);e!==void 0&&l!=null&&r(e,["setup","generationConfig","responseModalities"],l);const a=i(n,["temperature"]);e!==void 0&&a!=null&&r(e,["setup","generationConfig","temperature"],a);const d=i(n,["topP"]);e!==void 0&&d!=null&&r(e,["setup","generationConfig","topP"],d);const c=i(n,["topK"]);e!==void 0&&c!=null&&r(e,["setup","generationConfig","topK"],c);const u=i(n,["maxOutputTokens"]);e!==void 0&&u!=null&&r(e,["setup","generationConfig","maxOutputTokens"],u);const f=i(n,["mediaResolution"]);e!==void 0&&f!=null&&r(e,["setup","generationConfig","mediaResolution"],f);const p=i(n,["seed"]);e!==void 0&&p!=null&&r(e,["setup","generationConfig","seed"],p);const m=i(n,["speechConfig"]);e!==void 0&&m!=null&&r(e,["setup","generationConfig","speechConfig"],m);const g=i(n,["systemInstruction"]);e!==void 0&&g!=null&&r(e,["setup","systemInstruction"],$o(o,q(o,g)));const h=i(n,["tools"]);if(e!==void 0&&h!=null){let I=ge(o,h);Array.isArray(I)&&(I=I.map(M=>ti(o,me(o,M)))),r(e,["setup","tools"],I)}const T=i(n,["sessionResumption"]);e!==void 0&&T!=null&&r(e,["setup","sessionResumption"],ii(o,T));const v=i(n,["inputAudioTranscription"]);e!==void 0&&v!=null&&r(e,["setup","inputAudioTranscription"],Vn());const S=i(n,["outputAudioTranscription"]);e!==void 0&&S!=null&&r(e,["setup","outputAudioTranscription"],Vn());const x=i(n,["realtimeInputConfig"]);e!==void 0&&x!=null&&r(e,["setup","realtimeInputConfig"],ai(o,x));const R=i(n,["contextWindowCompression"]);return e!==void 0&&R!=null&&r(e,["setup","contextWindowCompression"],fi(o,R)),t}function gi(o,n,e){const t={},s=i(n,["generationConfig"]);e!==void 0&&s!=null&&r(e,["setup","generationConfig"],s);const l=i(n,["responseModalities"]);e!==void 0&&l!=null&&r(e,["setup","generationConfig","responseModalities"],l);const a=i(n,["temperature"]);e!==void 0&&a!=null&&r(e,["setup","generationConfig","temperature"],a);const d=i(n,["topP"]);e!==void 0&&d!=null&&r(e,["setup","generationConfig","topP"],d);const c=i(n,["topK"]);e!==void 0&&c!=null&&r(e,["setup","generationConfig","topK"],c);const u=i(n,["maxOutputTokens"]);e!==void 0&&u!=null&&r(e,["setup","generationConfig","maxOutputTokens"],u);const f=i(n,["mediaResolution"]);e!==void 0&&f!=null&&r(e,["setup","generationConfig","mediaResolution"],f);const p=i(n,["seed"]);e!==void 0&&p!=null&&r(e,["setup","generationConfig","seed"],p);const m=i(n,["speechConfig"]);e!==void 0&&m!=null&&r(e,["setup","generationConfig","speechConfig"],m);const g=i(n,["systemInstruction"]);e!==void 0&&g!=null&&r(e,["setup","systemInstruction"],Yo(o,q(o,g)));const h=i(n,["tools"]);if(e!==void 0&&h!=null){let I=ge(o,h);Array.isArray(I)&&(I=I.map(M=>oi(o,me(o,M)))),r(e,["setup","tools"],I)}const T=i(n,["sessionResumption"]);e!==void 0&&T!=null&&r(e,["setup","sessionResumption"],si(o,T));const v=i(n,["inputAudioTranscription"]);e!==void 0&&v!=null&&r(e,["setup","inputAudioTranscription"],Ln());const S=i(n,["outputAudioTranscription"]);e!==void 0&&S!=null&&r(e,["setup","outputAudioTranscription"],Ln());const x=i(n,["realtimeInputConfig"]);e!==void 0&&x!=null&&r(e,["setup","realtimeInputConfig"],ui(o,x));const R=i(n,["contextWindowCompression"]);return e!==void 0&&R!=null&&r(e,["setup","contextWindowCompression"],pi(o,R)),t}function hi(o,n){const e={},t=i(n,["model"]);t!=null&&r(e,["setup","model"],N(o,t));const s=i(n,["config"]);return s!=null&&r(e,["config"],mi(o,s,e)),e}function yi(o,n){const e={},t=i(n,["model"]);t!=null&&r(e,["setup","model"],N(o,t));const s=i(n,["config"]);return s!=null&&r(e,["config"],gi(o,s,e)),e}function Ti(){return{}}function Ci(){return{}}function vi(){return{}}function Ei(){return{}}function _i(o,n){const e={},t=i(n,["media"]);t!=null&&r(e,["mediaChunks"],Qn(o,t));const s=i(n,["audio"]);s!=null&&r(e,["audio"],vt(o,s));const l=i(n,["audioStreamEnd"]);l!=null&&r(e,["audioStreamEnd"],l);const a=i(n,["video"]);a!=null&&r(e,["video"],Ct(o,a));const d=i(n,["text"]);return d!=null&&r(e,["text"],d),i(n,["activityStart"])!=null&&r(e,["activityStart"],Ti()),i(n,["activityEnd"])!=null&&r(e,["activityEnd"],vi()),e}function Si(o,n){const e={},t=i(n,["media"]);if(t!=null&&r(e,["mediaChunks"],Qn(o,t)),i(n,["audio"])!==void 0)throw new Error("audio parameter is not supported in Vertex AI.");const s=i(n,["audioStreamEnd"]);if(s!=null&&r(e,["audioStreamEnd"],s),i(n,["video"])!==void 0)throw new Error("video parameter is not supported in Vertex AI.");if(i(n,["text"])!==void 0)throw new Error("text parameter is not supported in Vertex AI.");return i(n,["activityStart"])!=null&&r(e,["activityStart"],Ci()),i(n,["activityEnd"])!=null&&r(e,["activityEnd"],Ei()),e}function Ii(){return{}}function xi(){return{}}function Ai(o,n){const e={},t=i(n,["data"]);t!=null&&r(e,["data"],t);const s=i(n,["mimeType"]);return s!=null&&r(e,["mimeType"],s),e}function Mi(o,n){const e={},t=i(n,["displayName"]);t!=null&&r(e,["displayName"],t);const s=i(n,["data"]);s!=null&&r(e,["data"],s);const l=i(n,["mimeType"]);return l!=null&&r(e,["mimeType"],l),e}function Ri(o,n){const e={},t=i(n,["thought"]);t!=null&&r(e,["thought"],t);const s=i(n,["inlineData"]);s!=null&&r(e,["inlineData"],Ai(o,s));const l=i(n,["codeExecutionResult"]);l!=null&&r(e,["codeExecutionResult"],l);const a=i(n,["executableCode"]);a!=null&&r(e,["executableCode"],a);const d=i(n,["fileData"]);d!=null&&r(e,["fileData"],d);const c=i(n,["functionCall"]);c!=null&&r(e,["functionCall"],c);const u=i(n,["functionResponse"]);u!=null&&r(e,["functionResponse"],u);const f=i(n,["text"]);return f!=null&&r(e,["text"],f),e}function wi(o,n){const e={},t=i(n,["videoMetadata"]);t!=null&&r(e,["videoMetadata"],t);const s=i(n,["thought"]);s!=null&&r(e,["thought"],s);const l=i(n,["inlineData"]);l!=null&&r(e,["inlineData"],Mi(o,l));const a=i(n,["codeExecutionResult"]);a!=null&&r(e,["codeExecutionResult"],a);const d=i(n,["executableCode"]);d!=null&&r(e,["executableCode"],d);const c=i(n,["fileData"]);c!=null&&r(e,["fileData"],c);const u=i(n,["functionCall"]);u!=null&&r(e,["functionCall"],u);const f=i(n,["functionResponse"]);f!=null&&r(e,["functionResponse"],f);const p=i(n,["text"]);return p!=null&&r(e,["text"],p),e}function Pi(o,n){const e={},t=i(n,["parts"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(a=>Ri(o,a))),r(e,["parts"],l)}const s=i(n,["role"]);return s!=null&&r(e,["role"],s),e}function Ni(o,n){const e={},t=i(n,["parts"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(a=>wi(o,a))),r(e,["parts"],l)}const s=i(n,["role"]);return s!=null&&r(e,["role"],s),e}function Un(o,n){const e={},t=i(n,["text"]);t!=null&&r(e,["text"],t);const s=i(n,["finished"]);return s!=null&&r(e,["finished"],s),e}function Fn(o,n){const e={},t=i(n,["text"]);t!=null&&r(e,["text"],t);const s=i(n,["finished"]);return s!=null&&r(e,["finished"],s),e}function Di(o,n){const e={},t=i(n,["modelTurn"]);t!=null&&r(e,["modelTurn"],Pi(o,t));const s=i(n,["turnComplete"]);s!=null&&r(e,["turnComplete"],s);const l=i(n,["interrupted"]);l!=null&&r(e,["interrupted"],l);const a=i(n,["groundingMetadata"]);a!=null&&r(e,["groundingMetadata"],a);const d=i(n,["generationComplete"]);d!=null&&r(e,["generationComplete"],d);const c=i(n,["inputTranscription"]);c!=null&&r(e,["inputTranscription"],Un(o,c));const u=i(n,["outputTranscription"]);return u!=null&&r(e,["outputTranscription"],Un(o,u)),e}function Vi(o,n){const e={},t=i(n,["modelTurn"]);t!=null&&r(e,["modelTurn"],Ni(o,t));const s=i(n,["turnComplete"]);s!=null&&r(e,["turnComplete"],s);const l=i(n,["interrupted"]);l!=null&&r(e,["interrupted"],l);const a=i(n,["groundingMetadata"]);a!=null&&r(e,["groundingMetadata"],a);const d=i(n,["generationComplete"]);d!=null&&r(e,["generationComplete"],d);const c=i(n,["inputTranscription"]);c!=null&&r(e,["inputTranscription"],Fn(o,c));const u=i(n,["outputTranscription"]);return u!=null&&r(e,["outputTranscription"],Fn(o,u)),e}function Li(o,n){const e={},t=i(n,["id"]);t!=null&&r(e,["id"],t);const s=i(n,["args"]);s!=null&&r(e,["args"],s);const l=i(n,["name"]);return l!=null&&r(e,["name"],l),e}function Ui(o,n){const e={},t=i(n,["args"]);t!=null&&r(e,["args"],t);const s=i(n,["name"]);return s!=null&&r(e,["name"],s),e}function Fi(o,n){const e={},t=i(n,["functionCalls"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(l=>Li(o,l))),r(e,["functionCalls"],s)}return e}function ki(o,n){const e={},t=i(n,["functionCalls"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(l=>Ui(o,l))),r(e,["functionCalls"],s)}return e}function Gi(o,n){const e={},t=i(n,["ids"]);return t!=null&&r(e,["ids"],t),e}function qi(o,n){const e={},t=i(n,["ids"]);return t!=null&&r(e,["ids"],t),e}function ae(o,n){const e={},t=i(n,["modality"]);t!=null&&r(e,["modality"],t);const s=i(n,["tokenCount"]);return s!=null&&r(e,["tokenCount"],s),e}function ue(o,n){const e={},t=i(n,["modality"]);t!=null&&r(e,["modality"],t);const s=i(n,["tokenCount"]);return s!=null&&r(e,["tokenCount"],s),e}function Bi(o,n){const e={},t=i(n,["promptTokenCount"]);t!=null&&r(e,["promptTokenCount"],t);const s=i(n,["cachedContentTokenCount"]);s!=null&&r(e,["cachedContentTokenCount"],s);const l=i(n,["responseTokenCount"]);l!=null&&r(e,["responseTokenCount"],l);const a=i(n,["toolUsePromptTokenCount"]);a!=null&&r(e,["toolUsePromptTokenCount"],a);const d=i(n,["thoughtsTokenCount"]);d!=null&&r(e,["thoughtsTokenCount"],d);const c=i(n,["totalTokenCount"]);c!=null&&r(e,["totalTokenCount"],c);const u=i(n,["promptTokensDetails"]);if(u!=null){let g=u;Array.isArray(g)&&(g=g.map(h=>ae(o,h))),r(e,["promptTokensDetails"],g)}const f=i(n,["cacheTokensDetails"]);if(f!=null){let g=f;Array.isArray(g)&&(g=g.map(h=>ae(o,h))),r(e,["cacheTokensDetails"],g)}const p=i(n,["responseTokensDetails"]);if(p!=null){let g=p;Array.isArray(g)&&(g=g.map(h=>ae(o,h))),r(e,["responseTokensDetails"],g)}const m=i(n,["toolUsePromptTokensDetails"]);if(m!=null){let g=m;Array.isArray(g)&&(g=g.map(h=>ae(o,h))),r(e,["toolUsePromptTokensDetails"],g)}return e}function Hi(o,n){const e={},t=i(n,["promptTokenCount"]);t!=null&&r(e,["promptTokenCount"],t);const s=i(n,["cachedContentTokenCount"]);s!=null&&r(e,["cachedContentTokenCount"],s);const l=i(n,["candidatesTokenCount"]);l!=null&&r(e,["responseTokenCount"],l);const a=i(n,["toolUsePromptTokenCount"]);a!=null&&r(e,["toolUsePromptTokenCount"],a);const d=i(n,["thoughtsTokenCount"]);d!=null&&r(e,["thoughtsTokenCount"],d);const c=i(n,["totalTokenCount"]);c!=null&&r(e,["totalTokenCount"],c);const u=i(n,["promptTokensDetails"]);if(u!=null){let h=u;Array.isArray(h)&&(h=h.map(T=>ue(o,T))),r(e,["promptTokensDetails"],h)}const f=i(n,["cacheTokensDetails"]);if(f!=null){let h=f;Array.isArray(h)&&(h=h.map(T=>ue(o,T))),r(e,["cacheTokensDetails"],h)}const p=i(n,["candidatesTokensDetails"]);if(p!=null){let h=p;Array.isArray(h)&&(h=h.map(T=>ue(o,T))),r(e,["responseTokensDetails"],h)}const m=i(n,["toolUsePromptTokensDetails"]);if(m!=null){let h=m;Array.isArray(h)&&(h=h.map(T=>ue(o,T))),r(e,["toolUsePromptTokensDetails"],h)}const g=i(n,["trafficType"]);return g!=null&&r(e,["trafficType"],g),e}function bi(o,n){const e={},t=i(n,["timeLeft"]);return t!=null&&r(e,["timeLeft"],t),e}function Ji(o,n){const e={},t=i(n,["timeLeft"]);return t!=null&&r(e,["timeLeft"],t),e}function $i(o,n){const e={},t=i(n,["newHandle"]);t!=null&&r(e,["newHandle"],t);const s=i(n,["resumable"]);s!=null&&r(e,["resumable"],s);const l=i(n,["lastConsumedClientMessageIndex"]);return l!=null&&r(e,["lastConsumedClientMessageIndex"],l),e}function Yi(o,n){const e={},t=i(n,["newHandle"]);t!=null&&r(e,["newHandle"],t);const s=i(n,["resumable"]);s!=null&&r(e,["resumable"],s);const l=i(n,["lastConsumedClientMessageIndex"]);return l!=null&&r(e,["lastConsumedClientMessageIndex"],l),e}function Ki(o,n){const e={};i(n,["setupComplete"])!=null&&r(e,["setupComplete"],Ii());const s=i(n,["serverContent"]);s!=null&&r(e,["serverContent"],Di(o,s));const l=i(n,["toolCall"]);l!=null&&r(e,["toolCall"],Fi(o,l));const a=i(n,["toolCallCancellation"]);a!=null&&r(e,["toolCallCancellation"],Gi(o,a));const d=i(n,["usageMetadata"]);d!=null&&r(e,["usageMetadata"],Bi(o,d));const c=i(n,["goAway"]);c!=null&&r(e,["goAway"],bi(o,c));const u=i(n,["sessionResumptionUpdate"]);return u!=null&&r(e,["sessionResumptionUpdate"],$i(o,u)),e}function Wi(o,n){const e={};i(n,["setupComplete"])!=null&&r(e,["setupComplete"],xi());const s=i(n,["serverContent"]);s!=null&&r(e,["serverContent"],Vi(o,s));const l=i(n,["toolCall"]);l!=null&&r(e,["toolCall"],ki(o,l));const a=i(n,["toolCallCancellation"]);a!=null&&r(e,["toolCallCancellation"],qi(o,a));const d=i(n,["usageMetadata"]);d!=null&&r(e,["usageMetadata"],Hi(o,d));const c=i(n,["goAway"]);c!=null&&r(e,["goAway"],Ji(o,c));const u=i(n,["sessionResumptionUpdate"]);return u!=null&&r(e,["sessionResumptionUpdate"],Yi(o,u)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function zi(o,n){const e={};if(i(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=i(n,["data"]);t!=null&&r(e,["data"],t);const s=i(n,["mimeType"]);return s!=null&&r(e,["mimeType"],s),e}function Oi(o,n){const e={};if(i(n,["videoMetadata"])!==void 0)throw new Error("videoMetadata parameter is not supported in Gemini API.");const t=i(n,["thought"]);t!=null&&r(e,["thought"],t);const s=i(n,["inlineData"]);s!=null&&r(e,["inlineData"],zi(o,s));const l=i(n,["codeExecutionResult"]);l!=null&&r(e,["codeExecutionResult"],l);const a=i(n,["executableCode"]);a!=null&&r(e,["executableCode"],a);const d=i(n,["fileData"]);d!=null&&r(e,["fileData"],d);const c=i(n,["functionCall"]);c!=null&&r(e,["functionCall"],c);const u=i(n,["functionResponse"]);u!=null&&r(e,["functionResponse"],u);const f=i(n,["text"]);return f!=null&&r(e,["text"],f),e}function ye(o,n){const e={},t=i(n,["parts"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(a=>Oi(o,a))),r(e,["parts"],l)}const s=i(n,["role"]);return s!=null&&r(e,["role"],s),e}function Qi(o,n){const e={};if(i(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const t=i(n,["category"]);t!=null&&r(e,["category"],t);const s=i(n,["threshold"]);return s!=null&&r(e,["threshold"],s),e}function Xi(){return{}}function Zi(o,n){const e={},t=i(n,["mode"]);t!=null&&r(e,["mode"],t);const s=i(n,["dynamicThreshold"]);return s!=null&&r(e,["dynamicThreshold"],s),e}function ji(o,n){const e={},t=i(n,["dynamicRetrievalConfig"]);return t!=null&&r(e,["dynamicRetrievalConfig"],Zi(o,t)),e}function es(o,n){const e={};if(i(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");i(n,["googleSearch"])!=null&&r(e,["googleSearch"],Xi());const s=i(n,["googleSearchRetrieval"]);if(s!=null&&r(e,["googleSearchRetrieval"],ji(o,s)),i(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(i(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");const l=i(n,["codeExecution"]);l!=null&&r(e,["codeExecution"],l);const a=i(n,["functionDeclarations"]);return a!=null&&r(e,["functionDeclarations"],a),e}function ns(o,n){const e={},t=i(n,["mode"]);t!=null&&r(e,["mode"],t);const s=i(n,["allowedFunctionNames"]);return s!=null&&r(e,["allowedFunctionNames"],s),e}function ts(o,n){const e={},t=i(n,["functionCallingConfig"]);if(t!=null&&r(e,["functionCallingConfig"],ns(o,t)),i(n,["retrievalConfig"])!==void 0)throw new Error("retrievalConfig parameter is not supported in Gemini API.");return e}function os(o,n){const e={},t=i(n,["voiceName"]);return t!=null&&r(e,["voiceName"],t),e}function is(o,n){const e={},t=i(n,["prebuiltVoiceConfig"]);return t!=null&&r(e,["prebuiltVoiceConfig"],os(o,t)),e}function ss(o,n){const e={},t=i(n,["voiceConfig"]);t!=null&&r(e,["voiceConfig"],is(o,t));const s=i(n,["languageCode"]);return s!=null&&r(e,["languageCode"],s),e}function rs(o,n){const e={},t=i(n,["includeThoughts"]);t!=null&&r(e,["includeThoughts"],t);const s=i(n,["thinkingBudget"]);return s!=null&&r(e,["thinkingBudget"],s),e}function ls(o,n,e){const t={},s=i(n,["systemInstruction"]);e!==void 0&&s!=null&&r(e,["systemInstruction"],ye(o,q(o,s)));const l=i(n,["temperature"]);l!=null&&r(t,["temperature"],l);const a=i(n,["topP"]);a!=null&&r(t,["topP"],a);const d=i(n,["topK"]);d!=null&&r(t,["topK"],d);const c=i(n,["candidateCount"]);c!=null&&r(t,["candidateCount"],c);const u=i(n,["maxOutputTokens"]);u!=null&&r(t,["maxOutputTokens"],u);const f=i(n,["stopSequences"]);f!=null&&r(t,["stopSequences"],f);const p=i(n,["responseLogprobs"]);p!=null&&r(t,["responseLogprobs"],p);const m=i(n,["logprobs"]);m!=null&&r(t,["logprobs"],m);const g=i(n,["presencePenalty"]);g!=null&&r(t,["presencePenalty"],g);const h=i(n,["frequencyPenalty"]);h!=null&&r(t,["frequencyPenalty"],h);const T=i(n,["seed"]);T!=null&&r(t,["seed"],T);const v=i(n,["responseMimeType"]);v!=null&&r(t,["responseMimeType"],v);const S=i(n,["responseSchema"]);if(S!=null&&r(t,["responseSchema"],jn(o,S)),i(n,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(i(n,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const x=i(n,["safetySettings"]);if(e!==void 0&&x!=null){let L=x;Array.isArray(L)&&(L=L.map(Y=>Qi(o,Y))),r(e,["safetySettings"],L)}const R=i(n,["tools"]);if(e!==void 0&&R!=null){let L=ge(o,R);Array.isArray(L)&&(L=L.map(Y=>es(o,me(o,Y)))),r(e,["tools"],L)}const I=i(n,["toolConfig"]);if(e!==void 0&&I!=null&&r(e,["toolConfig"],ts(o,I)),i(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const M=i(n,["cachedContent"]);e!==void 0&&M!=null&&r(e,["cachedContent"],Z(o,M));const z=i(n,["responseModalities"]);z!=null&&r(t,["responseModalities"],z);const O=i(n,["mediaResolution"]);O!=null&&r(t,["mediaResolution"],O);const k=i(n,["speechConfig"]);if(k!=null&&r(t,["speechConfig"],ss(o,et(o,k))),i(n,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const Q=i(n,["thinkingConfig"]);return Q!=null&&r(t,["thinkingConfig"],rs(o,Q)),t}function kn(o,n){const e={},t=i(n,["model"]);t!=null&&r(e,["_url","model"],N(o,t));const s=i(n,["contents"]);if(s!=null){let a=X(o,s);Array.isArray(a)&&(a=a.map(d=>ye(o,d))),r(e,["contents"],a)}const l=i(n,["config"]);return l!=null&&r(e,["generationConfig"],ls(o,l,e)),e}function as(o,n,e){const t={},s=i(n,["taskType"]);e!==void 0&&s!=null&&r(e,["requests[]","taskType"],s);const l=i(n,["title"]);e!==void 0&&l!=null&&r(e,["requests[]","title"],l);const a=i(n,["outputDimensionality"]);if(e!==void 0&&a!=null&&r(e,["requests[]","outputDimensionality"],a),i(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(i(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function us(o,n){const e={},t=i(n,["model"]);t!=null&&r(e,["_url","model"],N(o,t));const s=i(n,["contents"]);s!=null&&r(e,["requests[]","content"],Zn(o,s));const l=i(n,["config"]);l!=null&&r(e,["config"],as(o,l,e));const a=i(n,["model"]);return a!==void 0&&r(e,["requests[]","model"],N(o,a)),e}function ds(o,n,e){const t={};if(i(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(i(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const s=i(n,["numberOfImages"]);e!==void 0&&s!=null&&r(e,["parameters","sampleCount"],s);const l=i(n,["aspectRatio"]);e!==void 0&&l!=null&&r(e,["parameters","aspectRatio"],l);const a=i(n,["guidanceScale"]);if(e!==void 0&&a!=null&&r(e,["parameters","guidanceScale"],a),i(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const d=i(n,["safetyFilterLevel"]);e!==void 0&&d!=null&&r(e,["parameters","safetySetting"],d);const c=i(n,["personGeneration"]);e!==void 0&&c!=null&&r(e,["parameters","personGeneration"],c);const u=i(n,["includeSafetyAttributes"]);e!==void 0&&u!=null&&r(e,["parameters","includeSafetyAttributes"],u);const f=i(n,["includeRaiReason"]);e!==void 0&&f!=null&&r(e,["parameters","includeRaiReason"],f);const p=i(n,["language"]);e!==void 0&&p!=null&&r(e,["parameters","language"],p);const m=i(n,["outputMimeType"]);e!==void 0&&m!=null&&r(e,["parameters","outputOptions","mimeType"],m);const g=i(n,["outputCompressionQuality"]);if(e!==void 0&&g!=null&&r(e,["parameters","outputOptions","compressionQuality"],g),i(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(i(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function cs(o,n){const e={},t=i(n,["model"]);t!=null&&r(e,["_url","model"],N(o,t));const s=i(n,["prompt"]);s!=null&&r(e,["instances[0]","prompt"],s);const l=i(n,["config"]);return l!=null&&r(e,["config"],ds(o,l,e)),e}function fs(o,n){const e={},t=i(n,["model"]);t!=null&&r(e,["_url","name"],N(o,t));const s=i(n,["config"]);return s!=null&&r(e,["config"],s),e}function ps(o,n,e){const t={},s=i(n,["pageSize"]);e!==void 0&&s!=null&&r(e,["_query","pageSize"],s);const l=i(n,["pageToken"]);e!==void 0&&l!=null&&r(e,["_query","pageToken"],l);const a=i(n,["filter"]);e!==void 0&&a!=null&&r(e,["_query","filter"],a);const d=i(n,["queryBase"]);return e!==void 0&&d!=null&&r(e,["_url","models_url"],ot(o,d)),t}function ms(o,n){const e={},t=i(n,["config"]);return t!=null&&r(e,["config"],ps(o,t,e)),e}function gs(o,n,e){const t={},s=i(n,["displayName"]);e!==void 0&&s!=null&&r(e,["displayName"],s);const l=i(n,["description"]);e!==void 0&&l!=null&&r(e,["description"],l);const a=i(n,["defaultCheckpointId"]);return e!==void 0&&a!=null&&r(e,["defaultCheckpointId"],a),t}function hs(o,n){const e={},t=i(n,["model"]);t!=null&&r(e,["_url","name"],N(o,t));const s=i(n,["config"]);return s!=null&&r(e,["config"],gs(o,s,e)),e}function ys(o,n){const e={},t=i(n,["model"]);t!=null&&r(e,["_url","name"],N(o,t));const s=i(n,["config"]);return s!=null&&r(e,["config"],s),e}function Ts(o,n){const e={};if(i(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(i(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(i(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function Cs(o,n){const e={},t=i(n,["model"]);t!=null&&r(e,["_url","model"],N(o,t));const s=i(n,["contents"]);if(s!=null){let a=X(o,s);Array.isArray(a)&&(a=a.map(d=>ye(o,d))),r(e,["contents"],a)}const l=i(n,["config"]);return l!=null&&r(e,["config"],Ts(o,l)),e}function vs(o,n){const e={};if(i(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=i(n,["imageBytes"]);t!=null&&r(e,["bytesBase64Encoded"],j(o,t));const s=i(n,["mimeType"]);return s!=null&&r(e,["mimeType"],s),e}function Es(o,n,e){const t={},s=i(n,["numberOfVideos"]);if(e!==void 0&&s!=null&&r(e,["parameters","sampleCount"],s),i(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(i(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const l=i(n,["durationSeconds"]);if(e!==void 0&&l!=null&&r(e,["parameters","durationSeconds"],l),i(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=i(n,["aspectRatio"]);if(e!==void 0&&a!=null&&r(e,["parameters","aspectRatio"],a),i(n,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const d=i(n,["personGeneration"]);if(e!==void 0&&d!=null&&r(e,["parameters","personGeneration"],d),i(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const c=i(n,["negativePrompt"]);if(e!==void 0&&c!=null&&r(e,["parameters","negativePrompt"],c),i(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function _s(o,n){const e={},t=i(n,["model"]);t!=null&&r(e,["_url","model"],N(o,t));const s=i(n,["prompt"]);s!=null&&r(e,["instances[0]","prompt"],s);const l=i(n,["image"]);l!=null&&r(e,["instances[0]","image"],vs(o,l));const a=i(n,["config"]);return a!=null&&r(e,["config"],Es(o,a,e)),e}function Ss(o,n){const e={},t=i(n,["displayName"]);t!=null&&r(e,["displayName"],t);const s=i(n,["data"]);s!=null&&r(e,["data"],s);const l=i(n,["mimeType"]);return l!=null&&r(e,["mimeType"],l),e}function Is(o,n){const e={},t=i(n,["videoMetadata"]);t!=null&&r(e,["videoMetadata"],t);const s=i(n,["thought"]);s!=null&&r(e,["thought"],s);const l=i(n,["inlineData"]);l!=null&&r(e,["inlineData"],Ss(o,l));const a=i(n,["codeExecutionResult"]);a!=null&&r(e,["codeExecutionResult"],a);const d=i(n,["executableCode"]);d!=null&&r(e,["executableCode"],d);const c=i(n,["fileData"]);c!=null&&r(e,["fileData"],c);const u=i(n,["functionCall"]);u!=null&&r(e,["functionCall"],u);const f=i(n,["functionResponse"]);f!=null&&r(e,["functionResponse"],f);const p=i(n,["text"]);return p!=null&&r(e,["text"],p),e}function ie(o,n){const e={},t=i(n,["parts"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(a=>Is(o,a))),r(e,["parts"],l)}const s=i(n,["role"]);return s!=null&&r(e,["role"],s),e}function xs(o,n){const e={},t=i(n,["featureSelectionPreference"]);return t!=null&&r(e,["featureSelectionPreference"],t),e}function As(o,n){const e={},t=i(n,["method"]);t!=null&&r(e,["method"],t);const s=i(n,["category"]);s!=null&&r(e,["category"],s);const l=i(n,["threshold"]);return l!=null&&r(e,["threshold"],l),e}function Ms(){return{}}function Rs(o,n){const e={},t=i(n,["mode"]);t!=null&&r(e,["mode"],t);const s=i(n,["dynamicThreshold"]);return s!=null&&r(e,["dynamicThreshold"],s),e}function ws(o,n){const e={},t=i(n,["dynamicRetrievalConfig"]);return t!=null&&r(e,["dynamicRetrievalConfig"],Rs(o,t)),e}function Ps(){return{}}function Ns(o,n){const e={},t=i(n,["apiKeyString"]);return t!=null&&r(e,["apiKeyString"],t),e}function Ds(o,n){const e={},t=i(n,["apiKeyConfig"]);t!=null&&r(e,["apiKeyConfig"],Ns(o,t));const s=i(n,["authType"]);s!=null&&r(e,["authType"],s);const l=i(n,["googleServiceAccountConfig"]);l!=null&&r(e,["googleServiceAccountConfig"],l);const a=i(n,["httpBasicAuthConfig"]);a!=null&&r(e,["httpBasicAuthConfig"],a);const d=i(n,["oauthConfig"]);d!=null&&r(e,["oauthConfig"],d);const c=i(n,["oidcConfig"]);return c!=null&&r(e,["oidcConfig"],c),e}function Vs(o,n){const e={},t=i(n,["authConfig"]);return t!=null&&r(e,["authConfig"],Ds(o,t)),e}function rt(o,n){const e={},t=i(n,["retrieval"]);t!=null&&r(e,["retrieval"],t),i(n,["googleSearch"])!=null&&r(e,["googleSearch"],Ms());const l=i(n,["googleSearchRetrieval"]);l!=null&&r(e,["googleSearchRetrieval"],ws(o,l)),i(n,["enterpriseWebSearch"])!=null&&r(e,["enterpriseWebSearch"],Ps());const d=i(n,["googleMaps"]);d!=null&&r(e,["googleMaps"],Vs(o,d));const c=i(n,["codeExecution"]);c!=null&&r(e,["codeExecution"],c);const u=i(n,["functionDeclarations"]);return u!=null&&r(e,["functionDeclarations"],u),e}function Ls(o,n){const e={},t=i(n,["mode"]);t!=null&&r(e,["mode"],t);const s=i(n,["allowedFunctionNames"]);return s!=null&&r(e,["allowedFunctionNames"],s),e}function Us(o,n){const e={},t=i(n,["latitude"]);t!=null&&r(e,["latitude"],t);const s=i(n,["longitude"]);return s!=null&&r(e,["longitude"],s),e}function Fs(o,n){const e={},t=i(n,["latLng"]);return t!=null&&r(e,["latLng"],Us(o,t)),e}function ks(o,n){const e={},t=i(n,["functionCallingConfig"]);t!=null&&r(e,["functionCallingConfig"],Ls(o,t));const s=i(n,["retrievalConfig"]);return s!=null&&r(e,["retrievalConfig"],Fs(o,s)),e}function Gs(o,n){const e={},t=i(n,["voiceName"]);return t!=null&&r(e,["voiceName"],t),e}function qs(o,n){const e={},t=i(n,["prebuiltVoiceConfig"]);return t!=null&&r(e,["prebuiltVoiceConfig"],Gs(o,t)),e}function Bs(o,n){const e={},t=i(n,["voiceConfig"]);t!=null&&r(e,["voiceConfig"],qs(o,t));const s=i(n,["languageCode"]);return s!=null&&r(e,["languageCode"],s),e}function Hs(o,n){const e={},t=i(n,["includeThoughts"]);t!=null&&r(e,["includeThoughts"],t);const s=i(n,["thinkingBudget"]);return s!=null&&r(e,["thinkingBudget"],s),e}function bs(o,n,e){const t={},s=i(n,["systemInstruction"]);e!==void 0&&s!=null&&r(e,["systemInstruction"],ie(o,q(o,s)));const l=i(n,["temperature"]);l!=null&&r(t,["temperature"],l);const a=i(n,["topP"]);a!=null&&r(t,["topP"],a);const d=i(n,["topK"]);d!=null&&r(t,["topK"],d);const c=i(n,["candidateCount"]);c!=null&&r(t,["candidateCount"],c);const u=i(n,["maxOutputTokens"]);u!=null&&r(t,["maxOutputTokens"],u);const f=i(n,["stopSequences"]);f!=null&&r(t,["stopSequences"],f);const p=i(n,["responseLogprobs"]);p!=null&&r(t,["responseLogprobs"],p);const m=i(n,["logprobs"]);m!=null&&r(t,["logprobs"],m);const g=i(n,["presencePenalty"]);g!=null&&r(t,["presencePenalty"],g);const h=i(n,["frequencyPenalty"]);h!=null&&r(t,["frequencyPenalty"],h);const T=i(n,["seed"]);T!=null&&r(t,["seed"],T);const v=i(n,["responseMimeType"]);v!=null&&r(t,["responseMimeType"],v);const S=i(n,["responseSchema"]);S!=null&&r(t,["responseSchema"],jn(o,S));const x=i(n,["routingConfig"]);x!=null&&r(t,["routingConfig"],x);const R=i(n,["modelSelectionConfig"]);R!=null&&r(t,["modelConfig"],xs(o,R));const I=i(n,["safetySettings"]);if(e!==void 0&&I!=null){let D=I;Array.isArray(D)&&(D=D.map(ne=>As(o,ne))),r(e,["safetySettings"],D)}const M=i(n,["tools"]);if(e!==void 0&&M!=null){let D=ge(o,M);Array.isArray(D)&&(D=D.map(ne=>rt(o,me(o,ne)))),r(e,["tools"],D)}const z=i(n,["toolConfig"]);e!==void 0&&z!=null&&r(e,["toolConfig"],ks(o,z));const O=i(n,["labels"]);e!==void 0&&O!=null&&r(e,["labels"],O);const k=i(n,["cachedContent"]);e!==void 0&&k!=null&&r(e,["cachedContent"],Z(o,k));const Q=i(n,["responseModalities"]);Q!=null&&r(t,["responseModalities"],Q);const L=i(n,["mediaResolution"]);L!=null&&r(t,["mediaResolution"],L);const Y=i(n,["speechConfig"]);Y!=null&&r(t,["speechConfig"],Bs(o,et(o,Y)));const ee=i(n,["audioTimestamp"]);ee!=null&&r(t,["audioTimestamp"],ee);const J=i(n,["thinkingConfig"]);return J!=null&&r(t,["thinkingConfig"],Hs(o,J)),t}function Gn(o,n){const e={},t=i(n,["model"]);t!=null&&r(e,["_url","model"],N(o,t));const s=i(n,["contents"]);if(s!=null){let a=X(o,s);Array.isArray(a)&&(a=a.map(d=>ie(o,d))),r(e,["contents"],a)}const l=i(n,["config"]);return l!=null&&r(e,["generationConfig"],bs(o,l,e)),e}function Js(o,n,e){const t={},s=i(n,["taskType"]);e!==void 0&&s!=null&&r(e,["instances[]","task_type"],s);const l=i(n,["title"]);e!==void 0&&l!=null&&r(e,["instances[]","title"],l);const a=i(n,["outputDimensionality"]);e!==void 0&&a!=null&&r(e,["parameters","outputDimensionality"],a);const d=i(n,["mimeType"]);e!==void 0&&d!=null&&r(e,["instances[]","mimeType"],d);const c=i(n,["autoTruncate"]);return e!==void 0&&c!=null&&r(e,["parameters","autoTruncate"],c),t}function $s(o,n){const e={},t=i(n,["model"]);t!=null&&r(e,["_url","model"],N(o,t));const s=i(n,["contents"]);s!=null&&r(e,["instances[]","content"],Zn(o,s));const l=i(n,["config"]);return l!=null&&r(e,["config"],Js(o,l,e)),e}function Ys(o,n,e){const t={},s=i(n,["outputGcsUri"]);e!==void 0&&s!=null&&r(e,["parameters","storageUri"],s);const l=i(n,["negativePrompt"]);e!==void 0&&l!=null&&r(e,["parameters","negativePrompt"],l);const a=i(n,["numberOfImages"]);e!==void 0&&a!=null&&r(e,["parameters","sampleCount"],a);const d=i(n,["aspectRatio"]);e!==void 0&&d!=null&&r(e,["parameters","aspectRatio"],d);const c=i(n,["guidanceScale"]);e!==void 0&&c!=null&&r(e,["parameters","guidanceScale"],c);const u=i(n,["seed"]);e!==void 0&&u!=null&&r(e,["parameters","seed"],u);const f=i(n,["safetyFilterLevel"]);e!==void 0&&f!=null&&r(e,["parameters","safetySetting"],f);const p=i(n,["personGeneration"]);e!==void 0&&p!=null&&r(e,["parameters","personGeneration"],p);const m=i(n,["includeSafetyAttributes"]);e!==void 0&&m!=null&&r(e,["parameters","includeSafetyAttributes"],m);const g=i(n,["includeRaiReason"]);e!==void 0&&g!=null&&r(e,["parameters","includeRaiReason"],g);const h=i(n,["language"]);e!==void 0&&h!=null&&r(e,["parameters","language"],h);const T=i(n,["outputMimeType"]);e!==void 0&&T!=null&&r(e,["parameters","outputOptions","mimeType"],T);const v=i(n,["outputCompressionQuality"]);e!==void 0&&v!=null&&r(e,["parameters","outputOptions","compressionQuality"],v);const S=i(n,["addWatermark"]);e!==void 0&&S!=null&&r(e,["parameters","addWatermark"],S);const x=i(n,["enhancePrompt"]);return e!==void 0&&x!=null&&r(e,["parameters","enhancePrompt"],x),t}function Ks(o,n){const e={},t=i(n,["model"]);t!=null&&r(e,["_url","model"],N(o,t));const s=i(n,["prompt"]);s!=null&&r(e,["instances[0]","prompt"],s);const l=i(n,["config"]);return l!=null&&r(e,["config"],Ys(o,l,e)),e}function Pe(o,n){const e={},t=i(n,["gcsUri"]);t!=null&&r(e,["gcsUri"],t);const s=i(n,["imageBytes"]);s!=null&&r(e,["bytesBase64Encoded"],j(o,s));const l=i(n,["mimeType"]);return l!=null&&r(e,["mimeType"],l),e}function Ws(o,n){const e={},t=i(n,["maskMode"]);t!=null&&r(e,["maskMode"],t);const s=i(n,["segmentationClasses"]);s!=null&&r(e,["maskClasses"],s);const l=i(n,["maskDilation"]);return l!=null&&r(e,["dilation"],l),e}function zs(o,n){const e={},t=i(n,["controlType"]);t!=null&&r(e,["controlType"],t);const s=i(n,["enableControlImageComputation"]);return s!=null&&r(e,["computeControl"],s),e}function Os(o,n){const e={},t=i(n,["styleDescription"]);return t!=null&&r(e,["styleDescription"],t),e}function Qs(o,n){const e={},t=i(n,["subjectType"]);t!=null&&r(e,["subjectType"],t);const s=i(n,["subjectDescription"]);return s!=null&&r(e,["subjectDescription"],s),e}function Xs(o,n){const e={},t=i(n,["referenceImage"]);t!=null&&r(e,["referenceImage"],Pe(o,t));const s=i(n,["referenceId"]);s!=null&&r(e,["referenceId"],s);const l=i(n,["referenceType"]);l!=null&&r(e,["referenceType"],l);const a=i(n,["maskImageConfig"]);a!=null&&r(e,["maskImageConfig"],Ws(o,a));const d=i(n,["controlImageConfig"]);d!=null&&r(e,["controlImageConfig"],zs(o,d));const c=i(n,["styleImageConfig"]);c!=null&&r(e,["styleImageConfig"],Os(o,c));const u=i(n,["subjectImageConfig"]);return u!=null&&r(e,["subjectImageConfig"],Qs(o,u)),e}function Zs(o,n,e){const t={},s=i(n,["outputGcsUri"]);e!==void 0&&s!=null&&r(e,["parameters","storageUri"],s);const l=i(n,["negativePrompt"]);e!==void 0&&l!=null&&r(e,["parameters","negativePrompt"],l);const a=i(n,["numberOfImages"]);e!==void 0&&a!=null&&r(e,["parameters","sampleCount"],a);const d=i(n,["aspectRatio"]);e!==void 0&&d!=null&&r(e,["parameters","aspectRatio"],d);const c=i(n,["guidanceScale"]);e!==void 0&&c!=null&&r(e,["parameters","guidanceScale"],c);const u=i(n,["seed"]);e!==void 0&&u!=null&&r(e,["parameters","seed"],u);const f=i(n,["safetyFilterLevel"]);e!==void 0&&f!=null&&r(e,["parameters","safetySetting"],f);const p=i(n,["personGeneration"]);e!==void 0&&p!=null&&r(e,["parameters","personGeneration"],p);const m=i(n,["includeSafetyAttributes"]);e!==void 0&&m!=null&&r(e,["parameters","includeSafetyAttributes"],m);const g=i(n,["includeRaiReason"]);e!==void 0&&g!=null&&r(e,["parameters","includeRaiReason"],g);const h=i(n,["language"]);e!==void 0&&h!=null&&r(e,["parameters","language"],h);const T=i(n,["outputMimeType"]);e!==void 0&&T!=null&&r(e,["parameters","outputOptions","mimeType"],T);const v=i(n,["outputCompressionQuality"]);e!==void 0&&v!=null&&r(e,["parameters","outputOptions","compressionQuality"],v);const S=i(n,["editMode"]);e!==void 0&&S!=null&&r(e,["parameters","editMode"],S);const x=i(n,["baseSteps"]);return e!==void 0&&x!=null&&r(e,["parameters","editConfig","baseSteps"],x),t}function js(o,n){const e={},t=i(n,["model"]);t!=null&&r(e,["_url","model"],N(o,t));const s=i(n,["prompt"]);s!=null&&r(e,["instances[0]","prompt"],s);const l=i(n,["referenceImages"]);if(l!=null){let d=l;Array.isArray(d)&&(d=d.map(c=>Xs(o,c))),r(e,["instances[0]","referenceImages"],d)}const a=i(n,["config"]);return a!=null&&r(e,["config"],Zs(o,a,e)),e}function er(o,n,e){const t={},s=i(n,["includeRaiReason"]);e!==void 0&&s!=null&&r(e,["parameters","includeRaiReason"],s);const l=i(n,["outputMimeType"]);e!==void 0&&l!=null&&r(e,["parameters","outputOptions","mimeType"],l);const a=i(n,["outputCompressionQuality"]);e!==void 0&&a!=null&&r(e,["parameters","outputOptions","compressionQuality"],a);const d=i(n,["numberOfImages"]);e!==void 0&&d!=null&&r(e,["parameters","sampleCount"],d);const c=i(n,["mode"]);return e!==void 0&&c!=null&&r(e,["parameters","mode"],c),t}function nr(o,n){const e={},t=i(n,["model"]);t!=null&&r(e,["_url","model"],N(o,t));const s=i(n,["image"]);s!=null&&r(e,["instances[0]","image"],Pe(o,s));const l=i(n,["upscaleFactor"]);l!=null&&r(e,["parameters","upscaleConfig","upscaleFactor"],l);const a=i(n,["config"]);return a!=null&&r(e,["config"],er(o,a,e)),e}function tr(o,n){const e={},t=i(n,["model"]);t!=null&&r(e,["_url","name"],N(o,t));const s=i(n,["config"]);return s!=null&&r(e,["config"],s),e}function or(o,n,e){const t={},s=i(n,["pageSize"]);e!==void 0&&s!=null&&r(e,["_query","pageSize"],s);const l=i(n,["pageToken"]);e!==void 0&&l!=null&&r(e,["_query","pageToken"],l);const a=i(n,["filter"]);e!==void 0&&a!=null&&r(e,["_query","filter"],a);const d=i(n,["queryBase"]);return e!==void 0&&d!=null&&r(e,["_url","models_url"],ot(o,d)),t}function ir(o,n){const e={},t=i(n,["config"]);return t!=null&&r(e,["config"],or(o,t,e)),e}function sr(o,n,e){const t={},s=i(n,["displayName"]);e!==void 0&&s!=null&&r(e,["displayName"],s);const l=i(n,["description"]);e!==void 0&&l!=null&&r(e,["description"],l);const a=i(n,["defaultCheckpointId"]);return e!==void 0&&a!=null&&r(e,["defaultCheckpointId"],a),t}function rr(o,n){const e={},t=i(n,["model"]);t!=null&&r(e,["_url","model"],N(o,t));const s=i(n,["config"]);return s!=null&&r(e,["config"],sr(o,s,e)),e}function lr(o,n){const e={},t=i(n,["model"]);t!=null&&r(e,["_url","name"],N(o,t));const s=i(n,["config"]);return s!=null&&r(e,["config"],s),e}function ar(o,n,e){const t={},s=i(n,["systemInstruction"]);e!==void 0&&s!=null&&r(e,["systemInstruction"],ie(o,q(o,s)));const l=i(n,["tools"]);if(e!==void 0&&l!=null){let d=l;Array.isArray(d)&&(d=d.map(c=>rt(o,c))),r(e,["tools"],d)}const a=i(n,["generationConfig"]);return e!==void 0&&a!=null&&r(e,["generationConfig"],a),t}function ur(o,n){const e={},t=i(n,["model"]);t!=null&&r(e,["_url","model"],N(o,t));const s=i(n,["contents"]);if(s!=null){let a=X(o,s);Array.isArray(a)&&(a=a.map(d=>ie(o,d))),r(e,["contents"],a)}const l=i(n,["config"]);return l!=null&&r(e,["config"],ar(o,l,e)),e}function dr(o,n){const e={},t=i(n,["model"]);t!=null&&r(e,["_url","model"],N(o,t));const s=i(n,["contents"]);if(s!=null){let a=X(o,s);Array.isArray(a)&&(a=a.map(d=>ie(o,d))),r(e,["contents"],a)}const l=i(n,["config"]);return l!=null&&r(e,["config"],l),e}function cr(o,n,e){const t={},s=i(n,["numberOfVideos"]);e!==void 0&&s!=null&&r(e,["parameters","sampleCount"],s);const l=i(n,["outputGcsUri"]);e!==void 0&&l!=null&&r(e,["parameters","storageUri"],l);const a=i(n,["fps"]);e!==void 0&&a!=null&&r(e,["parameters","fps"],a);const d=i(n,["durationSeconds"]);e!==void 0&&d!=null&&r(e,["parameters","durationSeconds"],d);const c=i(n,["seed"]);e!==void 0&&c!=null&&r(e,["parameters","seed"],c);const u=i(n,["aspectRatio"]);e!==void 0&&u!=null&&r(e,["parameters","aspectRatio"],u);const f=i(n,["resolution"]);e!==void 0&&f!=null&&r(e,["parameters","resolution"],f);const p=i(n,["personGeneration"]);e!==void 0&&p!=null&&r(e,["parameters","personGeneration"],p);const m=i(n,["pubsubTopic"]);e!==void 0&&m!=null&&r(e,["parameters","pubsubTopic"],m);const g=i(n,["negativePrompt"]);e!==void 0&&g!=null&&r(e,["parameters","negativePrompt"],g);const h=i(n,["enhancePrompt"]);return e!==void 0&&h!=null&&r(e,["parameters","enhancePrompt"],h),t}function fr(o,n){const e={},t=i(n,["model"]);t!=null&&r(e,["_url","model"],N(o,t));const s=i(n,["prompt"]);s!=null&&r(e,["instances[0]","prompt"],s);const l=i(n,["image"]);l!=null&&r(e,["instances[0]","image"],Pe(o,l));const a=i(n,["config"]);return a!=null&&r(e,["config"],cr(o,a,e)),e}function pr(o,n){const e={},t=i(n,["data"]);t!=null&&r(e,["data"],t);const s=i(n,["mimeType"]);return s!=null&&r(e,["mimeType"],s),e}function mr(o,n){const e={},t=i(n,["thought"]);t!=null&&r(e,["thought"],t);const s=i(n,["inlineData"]);s!=null&&r(e,["inlineData"],pr(o,s));const l=i(n,["codeExecutionResult"]);l!=null&&r(e,["codeExecutionResult"],l);const a=i(n,["executableCode"]);a!=null&&r(e,["executableCode"],a);const d=i(n,["fileData"]);d!=null&&r(e,["fileData"],d);const c=i(n,["functionCall"]);c!=null&&r(e,["functionCall"],c);const u=i(n,["functionResponse"]);u!=null&&r(e,["functionResponse"],u);const f=i(n,["text"]);return f!=null&&r(e,["text"],f),e}function gr(o,n){const e={},t=i(n,["parts"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(a=>mr(o,a))),r(e,["parts"],l)}const s=i(n,["role"]);return s!=null&&r(e,["role"],s),e}function hr(o,n){const e={},t=i(n,["citationSources"]);return t!=null&&r(e,["citations"],t),e}function yr(o,n){const e={},t=i(n,["content"]);t!=null&&r(e,["content"],gr(o,t));const s=i(n,["citationMetadata"]);s!=null&&r(e,["citationMetadata"],hr(o,s));const l=i(n,["tokenCount"]);l!=null&&r(e,["tokenCount"],l);const a=i(n,["finishReason"]);a!=null&&r(e,["finishReason"],a);const d=i(n,["avgLogprobs"]);d!=null&&r(e,["avgLogprobs"],d);const c=i(n,["groundingMetadata"]);c!=null&&r(e,["groundingMetadata"],c);const u=i(n,["index"]);u!=null&&r(e,["index"],u);const f=i(n,["logprobsResult"]);f!=null&&r(e,["logprobsResult"],f);const p=i(n,["safetyRatings"]);return p!=null&&r(e,["safetyRatings"],p),e}function qn(o,n){const e={},t=i(n,["candidates"]);if(t!=null){let d=t;Array.isArray(d)&&(d=d.map(c=>yr(o,c))),r(e,["candidates"],d)}const s=i(n,["modelVersion"]);s!=null&&r(e,["modelVersion"],s);const l=i(n,["promptFeedback"]);l!=null&&r(e,["promptFeedback"],l);const a=i(n,["usageMetadata"]);return a!=null&&r(e,["usageMetadata"],a),e}function Tr(o,n){const e={},t=i(n,["values"]);return t!=null&&r(e,["values"],t),e}function Cr(){return{}}function vr(o,n){const e={},t=i(n,["embeddings"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(a=>Tr(o,a))),r(e,["embeddings"],l)}return i(n,["metadata"])!=null&&r(e,["metadata"],Cr()),e}function Er(o,n){const e={},t=i(n,["bytesBase64Encoded"]);t!=null&&r(e,["imageBytes"],j(o,t));const s=i(n,["mimeType"]);return s!=null&&r(e,["mimeType"],s),e}function lt(o,n){const e={},t=i(n,["safetyAttributes","categories"]);t!=null&&r(e,["categories"],t);const s=i(n,["safetyAttributes","scores"]);s!=null&&r(e,["scores"],s);const l=i(n,["contentType"]);return l!=null&&r(e,["contentType"],l),e}function _r(o,n){const e={},t=i(n,["_self"]);t!=null&&r(e,["image"],Er(o,t));const s=i(n,["raiFilteredReason"]);s!=null&&r(e,["raiFilteredReason"],s);const l=i(n,["_self"]);return l!=null&&r(e,["safetyAttributes"],lt(o,l)),e}function Sr(o,n){const e={},t=i(n,["predictions"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(a=>_r(o,a))),r(e,["generatedImages"],l)}const s=i(n,["positivePromptSafetyAttributes"]);return s!=null&&r(e,["positivePromptSafetyAttributes"],lt(o,s)),e}function Ir(o,n){const e={},t=i(n,["baseModel"]);t!=null&&r(e,["baseModel"],t);const s=i(n,["createTime"]);s!=null&&r(e,["createTime"],s);const l=i(n,["updateTime"]);return l!=null&&r(e,["updateTime"],l),e}function Ae(o,n){const e={},t=i(n,["name"]);t!=null&&r(e,["name"],t);const s=i(n,["displayName"]);s!=null&&r(e,["displayName"],s);const l=i(n,["description"]);l!=null&&r(e,["description"],l);const a=i(n,["version"]);a!=null&&r(e,["version"],a);const d=i(n,["_self"]);d!=null&&r(e,["tunedModelInfo"],Ir(o,d));const c=i(n,["inputTokenLimit"]);c!=null&&r(e,["inputTokenLimit"],c);const u=i(n,["outputTokenLimit"]);u!=null&&r(e,["outputTokenLimit"],u);const f=i(n,["supportedGenerationMethods"]);return f!=null&&r(e,["supportedActions"],f),e}function xr(o,n){const e={},t=i(n,["nextPageToken"]);t!=null&&r(e,["nextPageToken"],t);const s=i(n,["_self"]);if(s!=null){let l=it(o,s);Array.isArray(l)&&(l=l.map(a=>Ae(o,a))),r(e,["models"],l)}return e}function Ar(){return{}}function Mr(o,n){const e={},t=i(n,["totalTokens"]);t!=null&&r(e,["totalTokens"],t);const s=i(n,["cachedContentTokenCount"]);return s!=null&&r(e,["cachedContentTokenCount"],s),e}function Rr(o,n){const e={},t=i(n,["video","uri"]);t!=null&&r(e,["uri"],t);const s=i(n,["video","encodedVideo"]);s!=null&&r(e,["videoBytes"],j(o,s));const l=i(n,["encoding"]);return l!=null&&r(e,["mimeType"],l),e}function wr(o,n){const e={},t=i(n,["_self"]);return t!=null&&r(e,["video"],Rr(o,t)),e}function Pr(o,n){const e={},t=i(n,["generatedSamples"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(d=>wr(o,d))),r(e,["generatedVideos"],a)}const s=i(n,["raiMediaFilteredCount"]);s!=null&&r(e,["raiMediaFilteredCount"],s);const l=i(n,["raiMediaFilteredReasons"]);return l!=null&&r(e,["raiMediaFilteredReasons"],l),e}function Nr(o,n){const e={},t=i(n,["name"]);t!=null&&r(e,["name"],t);const s=i(n,["metadata"]);s!=null&&r(e,["metadata"],s);const l=i(n,["done"]);l!=null&&r(e,["done"],l);const a=i(n,["error"]);a!=null&&r(e,["error"],a);const d=i(n,["response","generateVideoResponse"]);return d!=null&&r(e,["response"],Pr(o,d)),e}function Dr(o,n){const e={},t=i(n,["displayName"]);t!=null&&r(e,["displayName"],t);const s=i(n,["data"]);s!=null&&r(e,["data"],s);const l=i(n,["mimeType"]);return l!=null&&r(e,["mimeType"],l),e}function Vr(o,n){const e={},t=i(n,["videoMetadata"]);t!=null&&r(e,["videoMetadata"],t);const s=i(n,["thought"]);s!=null&&r(e,["thought"],s);const l=i(n,["inlineData"]);l!=null&&r(e,["inlineData"],Dr(o,l));const a=i(n,["codeExecutionResult"]);a!=null&&r(e,["codeExecutionResult"],a);const d=i(n,["executableCode"]);d!=null&&r(e,["executableCode"],d);const c=i(n,["fileData"]);c!=null&&r(e,["fileData"],c);const u=i(n,["functionCall"]);u!=null&&r(e,["functionCall"],u);const f=i(n,["functionResponse"]);f!=null&&r(e,["functionResponse"],f);const p=i(n,["text"]);return p!=null&&r(e,["text"],p),e}function Lr(o,n){const e={},t=i(n,["parts"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(a=>Vr(o,a))),r(e,["parts"],l)}const s=i(n,["role"]);return s!=null&&r(e,["role"],s),e}function Ur(o,n){const e={},t=i(n,["citations"]);return t!=null&&r(e,["citations"],t),e}function Fr(o,n){const e={},t=i(n,["content"]);t!=null&&r(e,["content"],Lr(o,t));const s=i(n,["citationMetadata"]);s!=null&&r(e,["citationMetadata"],Ur(o,s));const l=i(n,["finishMessage"]);l!=null&&r(e,["finishMessage"],l);const a=i(n,["finishReason"]);a!=null&&r(e,["finishReason"],a);const d=i(n,["avgLogprobs"]);d!=null&&r(e,["avgLogprobs"],d);const c=i(n,["groundingMetadata"]);c!=null&&r(e,["groundingMetadata"],c);const u=i(n,["index"]);u!=null&&r(e,["index"],u);const f=i(n,["logprobsResult"]);f!=null&&r(e,["logprobsResult"],f);const p=i(n,["safetyRatings"]);return p!=null&&r(e,["safetyRatings"],p),e}function Bn(o,n){const e={},t=i(n,["candidates"]);if(t!=null){let u=t;Array.isArray(u)&&(u=u.map(f=>Fr(o,f))),r(e,["candidates"],u)}const s=i(n,["createTime"]);s!=null&&r(e,["createTime"],s);const l=i(n,["responseId"]);l!=null&&r(e,["responseId"],l);const a=i(n,["modelVersion"]);a!=null&&r(e,["modelVersion"],a);const d=i(n,["promptFeedback"]);d!=null&&r(e,["promptFeedback"],d);const c=i(n,["usageMetadata"]);return c!=null&&r(e,["usageMetadata"],c),e}function kr(o,n){const e={},t=i(n,["truncated"]);t!=null&&r(e,["truncated"],t);const s=i(n,["token_count"]);return s!=null&&r(e,["tokenCount"],s),e}function Gr(o,n){const e={},t=i(n,["values"]);t!=null&&r(e,["values"],t);const s=i(n,["statistics"]);return s!=null&&r(e,["statistics"],kr(o,s)),e}function qr(o,n){const e={},t=i(n,["billableCharacterCount"]);return t!=null&&r(e,["billableCharacterCount"],t),e}function Br(o,n){const e={},t=i(n,["predictions[]","embeddings"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(a=>Gr(o,a))),r(e,["embeddings"],l)}const s=i(n,["metadata"]);return s!=null&&r(e,["metadata"],qr(o,s)),e}function Hr(o,n){const e={},t=i(n,["gcsUri"]);t!=null&&r(e,["gcsUri"],t);const s=i(n,["bytesBase64Encoded"]);s!=null&&r(e,["imageBytes"],j(o,s));const l=i(n,["mimeType"]);return l!=null&&r(e,["mimeType"],l),e}function at(o,n){const e={},t=i(n,["safetyAttributes","categories"]);t!=null&&r(e,["categories"],t);const s=i(n,["safetyAttributes","scores"]);s!=null&&r(e,["scores"],s);const l=i(n,["contentType"]);return l!=null&&r(e,["contentType"],l),e}function Ne(o,n){const e={},t=i(n,["_self"]);t!=null&&r(e,["image"],Hr(o,t));const s=i(n,["raiFilteredReason"]);s!=null&&r(e,["raiFilteredReason"],s);const l=i(n,["_self"]);l!=null&&r(e,["safetyAttributes"],at(o,l));const a=i(n,["prompt"]);return a!=null&&r(e,["enhancedPrompt"],a),e}function br(o,n){const e={},t=i(n,["predictions"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(a=>Ne(o,a))),r(e,["generatedImages"],l)}const s=i(n,["positivePromptSafetyAttributes"]);return s!=null&&r(e,["positivePromptSafetyAttributes"],at(o,s)),e}function Jr(o,n){const e={},t=i(n,["predictions"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(l=>Ne(o,l))),r(e,["generatedImages"],s)}return e}function $r(o,n){const e={},t=i(n,["predictions"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(l=>Ne(o,l))),r(e,["generatedImages"],s)}return e}function Yr(o,n){const e={},t=i(n,["endpoint"]);t!=null&&r(e,["name"],t);const s=i(n,["deployedModelId"]);return s!=null&&r(e,["deployedModelId"],s),e}function Kr(o,n){const e={},t=i(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&r(e,["baseModel"],t);const s=i(n,["createTime"]);s!=null&&r(e,["createTime"],s);const l=i(n,["updateTime"]);return l!=null&&r(e,["updateTime"],l),e}function Wr(o,n){const e={},t=i(n,["checkpointId"]);t!=null&&r(e,["checkpointId"],t);const s=i(n,["epoch"]);s!=null&&r(e,["epoch"],s);const l=i(n,["step"]);return l!=null&&r(e,["step"],l),e}function Me(o,n){const e={},t=i(n,["name"]);t!=null&&r(e,["name"],t);const s=i(n,["displayName"]);s!=null&&r(e,["displayName"],s);const l=i(n,["description"]);l!=null&&r(e,["description"],l);const a=i(n,["versionId"]);a!=null&&r(e,["version"],a);const d=i(n,["deployedModels"]);if(d!=null){let m=d;Array.isArray(m)&&(m=m.map(g=>Yr(o,g))),r(e,["endpoints"],m)}const c=i(n,["labels"]);c!=null&&r(e,["labels"],c);const u=i(n,["_self"]);u!=null&&r(e,["tunedModelInfo"],Kr(o,u));const f=i(n,["defaultCheckpointId"]);f!=null&&r(e,["defaultCheckpointId"],f);const p=i(n,["checkpoints"]);if(p!=null){let m=p;Array.isArray(m)&&(m=m.map(g=>Wr(o,g))),r(e,["checkpoints"],m)}return e}function zr(o,n){const e={},t=i(n,["nextPageToken"]);t!=null&&r(e,["nextPageToken"],t);const s=i(n,["_self"]);if(s!=null){let l=it(o,s);Array.isArray(l)&&(l=l.map(a=>Me(o,a))),r(e,["models"],l)}return e}function Or(){return{}}function Qr(o,n){const e={},t=i(n,["totalTokens"]);return t!=null&&r(e,["totalTokens"],t),e}function Xr(o,n){const e={},t=i(n,["tokensInfo"]);return t!=null&&r(e,["tokensInfo"],t),e}function Zr(o,n){const e={},t=i(n,["gcsUri"]);t!=null&&r(e,["uri"],t);const s=i(n,["bytesBase64Encoded"]);s!=null&&r(e,["videoBytes"],j(o,s));const l=i(n,["mimeType"]);return l!=null&&r(e,["mimeType"],l),e}function jr(o,n){const e={},t=i(n,["_self"]);return t!=null&&r(e,["video"],Zr(o,t)),e}function el(o,n){const e={},t=i(n,["videos"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(d=>jr(o,d))),r(e,["generatedVideos"],a)}const s=i(n,["raiMediaFilteredCount"]);s!=null&&r(e,["raiMediaFilteredCount"],s);const l=i(n,["raiMediaFilteredReasons"]);return l!=null&&r(e,["raiMediaFilteredReasons"],l),e}function nl(o,n){const e={},t=i(n,["name"]);t!=null&&r(e,["name"],t);const s=i(n,["metadata"]);s!=null&&r(e,["metadata"],s);const l=i(n,["done"]);l!=null&&r(e,["done"],l);const a=i(n,["error"]);a!=null&&r(e,["error"],a);const d=i(n,["response"]);return d!=null&&r(e,["response"],el(o,d)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const tl="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function ol(o,n,e){const t=new Eo;let s;if(e.data instanceof Blob?s=JSON.parse(await e.data.text()):s=JSON.parse(e.data),o.isVertexAI()){const l=Wi(o,s);Object.assign(t,l)}else{const l=Ki(o,s);Object.assign(t,l)}n(t)}class il{constructor(n,e,t){this.apiClient=n,this.auth=e,this.webSocketFactory=t}async connect(n){var e,t,s,l;const a=this.apiClient.getWebsocketBaseUrl(),d=this.apiClient.getApiVersion();let c;const u=al(this.apiClient.getDefaultHeaders());if(this.apiClient.isVertexAI())c=`${a}/ws/google.cloud.aiplatform.${d}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(u);else{const I=this.apiClient.getApiKey();c=`${a}/ws/google.ai.generativelanguage.${d}.GenerativeService.BidiGenerateContent?key=${I}`}let f=()=>{};const p=new Promise(I=>{f=I}),m=n.callbacks,g=function(){var I;(I=m==null?void 0:m.onopen)===null||I===void 0||I.call(m),f({})},h=this.apiClient,T={onopen:g,onmessage:I=>{ol(h,m.onmessage,I)},onerror:(e=m==null?void 0:m.onerror)!==null&&e!==void 0?e:function(I){},onclose:(t=m==null?void 0:m.onclose)!==null&&t!==void 0?t:function(I){}},v=this.webSocketFactory.create(c,ll(u),T);v.connect(),await p;let S=N(this.apiClient,n.model);if(this.apiClient.isVertexAI()&&S.startsWith("publishers/")){const I=this.apiClient.getProject(),M=this.apiClient.getLocation();S=`projects/${I}/locations/${M}/`+S}let x={};this.apiClient.isVertexAI()&&((s=n.config)===null||s===void 0?void 0:s.responseModalities)===void 0&&(n.config===void 0?n.config={responseModalities:[se.AUDIO]}:n.config.responseModalities=[se.AUDIO]),!((l=n.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const R={model:S,config:n.config,callbacks:n.callbacks};return this.apiClient.isVertexAI()?x=yi(this.apiClient,R):x=hi(this.apiClient,R),delete x.config,v.send(JSON.stringify(x)),new rl(v,this.apiClient)}}const sl={turnComplete:!0};class rl{constructor(n,e){this.conn=n,this.apiClient=e}tLiveClientContent(n,e){if(e.turns!==null&&e.turns!==void 0){let t=[];try{t=X(n,e.turns),n.isVertexAI()?t=t.map(s=>ie(n,s)):t=t.map(s=>ye(n,s))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof e.turns}'`)}return{clientContent:{turns:t,turnComplete:e.turnComplete}}}return{clientContent:{turnComplete:e.turnComplete}}}tLiveClienttToolResponse(n,e){let t=[];if(e.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(e.functionResponses)?t=e.functionResponses:t=[e.functionResponses],t.length===0)throw new Error("functionResponses is required.");for(const l of t){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!n.isVertexAI()&&!("id"in l))throw new Error(tl)}return{toolResponse:{functionResponses:t}}}sendClientContent(n){n=Object.assign(Object.assign({},sl),n);const e=this.tLiveClientContent(this.apiClient,n);this.conn.send(JSON.stringify(e))}sendRealtimeInput(n){let e={};this.apiClient.isVertexAI()?e={realtimeInput:Si(this.apiClient,n)}:e={realtimeInput:_i(this.apiClient,n)},this.conn.send(JSON.stringify(e))}sendToolResponse(n){if(n.functionResponses==null)throw new Error("Tool response parameters are required.");const e=this.tLiveClienttToolResponse(this.apiClient,n);this.conn.send(JSON.stringify(e))}close(){this.conn.close()}}function ll(o){const n={};return o.forEach((e,t)=>{n[t]=e}),n}function al(o){const n=new Headers;for(const[e,t]of Object.entries(o))n.append(e,t);return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ul extends re{constructor(n){super(),this.apiClient=n,this.generateContent=async e=>await this.generateContentInternal(e),this.generateContentStream=async e=>await this.generateContentStreamInternal(e),this.generateImages=async e=>await this.generateImagesInternal(e).then(t=>{var s;let l;const a=[];if(t!=null&&t.generatedImages)for(const c of t.generatedImages)c&&(c!=null&&c.safetyAttributes)&&((s=c==null?void 0:c.safetyAttributes)===null||s===void 0?void 0:s.contentType)==="Positive Prompt"?l=c==null?void 0:c.safetyAttributes:a.push(c);let d;return l?d={generatedImages:a,positivePromptSafetyAttributes:l}:d={generatedImages:a},d}),this.list=async e=>{var t;const a={config:Object.assign(Object.assign({},{queryBase:!0}),e==null?void 0:e.config)};if(this.apiClient.isVertexAI()&&!a.config.queryBase){if(!((t=a.config)===null||t===void 0)&&t.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");a.config.filter="labels.tune-type:*"}return new he(oe.PAGED_ITEM_MODELS,d=>this.listInternal(d),await this.listInternal(a),a)},this.editImage=async e=>{const t={model:e.model,prompt:e.prompt,referenceImages:[],config:e.config};return e.referenceImages&&e.referenceImages&&(t.referenceImages=e.referenceImages.map(s=>s.toReferenceImageAPI())),await this.editImageInternal(t)},this.upscaleImage=async e=>{let t={numberOfImages:1,mode:"upscale"};e.config&&(t=Object.assign(Object.assign({},t),e.config));const s={model:e.model,image:e.image,upscaleFactor:e.upscaleFactor,config:t};return await this.upscaleImageInternal(s)}}async generateContentInternal(n){var e,t,s,l;let a,d="",c={};if(this.apiClient.isVertexAI()){const u=Gn(this.apiClient,n);return d=C("{model}:generateContent",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:d,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(t=n.config)===null||t===void 0?void 0:t.abortSignal}).then(f=>f.json()),a.then(f=>{const p=Bn(this.apiClient,f),m=new le;return Object.assign(m,p),m})}else{const u=kn(this.apiClient,n);return d=C("{model}:generateContent",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:d,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=n.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=n.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>{const p=qn(this.apiClient,f),m=new le;return Object.assign(m,p),m})}}async generateContentStreamInternal(n){var e,t,s,l;let a,d="",c={};if(this.apiClient.isVertexAI()){const u=Gn(this.apiClient,n);d=C("{model}:streamGenerateContent?alt=sse",u._url),c=u._query,delete u.config,delete u._url,delete u._query;const f=this.apiClient;return a=f.requestStream({path:d,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(t=n.config)===null||t===void 0?void 0:t.abortSignal}),a.then(function(p){return pe(this,arguments,function*(){var m,g,h,T;try{for(var v=!0,S=Ie(p),x;x=yield F(S.next()),m=x.done,!m;v=!0){T=x.value,v=!1;const I=Bn(f,yield F(T.json())),M=new le;Object.assign(M,I),yield yield F(M)}}catch(R){g={error:R}}finally{try{!v&&!m&&(h=S.return)&&(yield F(h.call(S)))}finally{if(g)throw g.error}}})})}else{const u=kn(this.apiClient,n);d=C("{model}:streamGenerateContent?alt=sse",u._url),c=u._query,delete u.config,delete u._url,delete u._query;const f=this.apiClient;return a=f.requestStream({path:d,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=n.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=n.config)===null||l===void 0?void 0:l.abortSignal}),a.then(function(p){return pe(this,arguments,function*(){var m,g,h,T;try{for(var v=!0,S=Ie(p),x;x=yield F(S.next()),m=x.done,!m;v=!0){T=x.value,v=!1;const I=qn(f,yield F(T.json())),M=new le;Object.assign(M,I),yield yield F(M)}}catch(R){g={error:R}}finally{try{!v&&!m&&(h=S.return)&&(yield F(h.call(S)))}finally{if(g)throw g.error}}})})}}async embedContent(n){var e,t,s,l;let a,d="",c={};if(this.apiClient.isVertexAI()){const u=$s(this.apiClient,n);return d=C("{model}:predict",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:d,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(t=n.config)===null||t===void 0?void 0:t.abortSignal}).then(f=>f.json()),a.then(f=>{const p=Br(this.apiClient,f),m=new In;return Object.assign(m,p),m})}else{const u=us(this.apiClient,n);return d=C("{model}:batchEmbedContents",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:d,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=n.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=n.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>{const p=vr(this.apiClient,f),m=new In;return Object.assign(m,p),m})}}async generateImagesInternal(n){var e,t,s,l;let a,d="",c={};if(this.apiClient.isVertexAI()){const u=Ks(this.apiClient,n);return d=C("{model}:predict",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:d,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(t=n.config)===null||t===void 0?void 0:t.abortSignal}).then(f=>f.json()),a.then(f=>{const p=br(this.apiClient,f),m=new xn;return Object.assign(m,p),m})}else{const u=cs(this.apiClient,n);return d=C("{model}:predict",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:d,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=n.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=n.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>{const p=Sr(this.apiClient,f),m=new xn;return Object.assign(m,p),m})}}async editImageInternal(n){var e,t;let s,l="",a={};if(this.apiClient.isVertexAI()){const d=js(this.apiClient,n);return l=C("{model}:predict",d._url),a=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(t=n.config)===null||t===void 0?void 0:t.abortSignal}).then(c=>c.json()),s.then(c=>{const u=Jr(this.apiClient,c),f=new go;return Object.assign(f,u),f})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(n){var e,t;let s,l="",a={};if(this.apiClient.isVertexAI()){const d=nr(this.apiClient,n);return l=C("{model}:predict",d._url),a=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(t=n.config)===null||t===void 0?void 0:t.abortSignal}).then(c=>c.json()),s.then(c=>{const u=$r(this.apiClient,c),f=new ho;return Object.assign(f,u),f})}else throw new Error("This method is only supported by the Vertex AI.")}async get(n){var e,t,s,l;let a,d="",c={};if(this.apiClient.isVertexAI()){const u=tr(this.apiClient,n);return d=C("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:d,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(t=n.config)===null||t===void 0?void 0:t.abortSignal}).then(f=>f.json()),a.then(f=>Me(this.apiClient,f))}else{const u=fs(this.apiClient,n);return d=C("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:d,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=n.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=n.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>Ae(this.apiClient,f))}}async listInternal(n){var e,t,s,l;let a,d="",c={};if(this.apiClient.isVertexAI()){const u=ir(this.apiClient,n);return d=C("{models_url}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:d,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(t=n.config)===null||t===void 0?void 0:t.abortSignal}).then(f=>f.json()),a.then(f=>{const p=zr(this.apiClient,f),m=new An;return Object.assign(m,p),m})}else{const u=ms(this.apiClient,n);return d=C("{models_url}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:d,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=n.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=n.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>{const p=xr(this.apiClient,f),m=new An;return Object.assign(m,p),m})}}async update(n){var e,t,s,l;let a,d="",c={};if(this.apiClient.isVertexAI()){const u=rr(this.apiClient,n);return d=C("{model}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:d,queryParams:c,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(t=n.config)===null||t===void 0?void 0:t.abortSignal}).then(f=>f.json()),a.then(f=>Me(this.apiClient,f))}else{const u=hs(this.apiClient,n);return d=C("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:d,queryParams:c,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(s=n.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=n.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>Ae(this.apiClient,f))}}async delete(n){var e,t,s,l;let a,d="",c={};if(this.apiClient.isVertexAI()){const u=lr(this.apiClient,n);return d=C("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:d,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(t=n.config)===null||t===void 0?void 0:t.abortSignal}).then(f=>f.json()),a.then(()=>{const f=Or(),p=new Mn;return Object.assign(p,f),p})}else{const u=ys(this.apiClient,n);return d=C("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:d,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(s=n.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=n.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(()=>{const f=Ar(),p=new Mn;return Object.assign(p,f),p})}}async countTokens(n){var e,t,s,l;let a,d="",c={};if(this.apiClient.isVertexAI()){const u=ur(this.apiClient,n);return d=C("{model}:countTokens",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:d,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(t=n.config)===null||t===void 0?void 0:t.abortSignal}).then(f=>f.json()),a.then(f=>{const p=Qr(this.apiClient,f),m=new Rn;return Object.assign(m,p),m})}else{const u=Cs(this.apiClient,n);return d=C("{model}:countTokens",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:d,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=n.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=n.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>{const p=Mr(this.apiClient,f),m=new Rn;return Object.assign(m,p),m})}}async computeTokens(n){var e,t;let s,l="",a={};if(this.apiClient.isVertexAI()){const d=dr(this.apiClient,n);return l=C("{model}:computeTokens",d._url),a=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(t=n.config)===null||t===void 0?void 0:t.abortSignal}).then(c=>c.json()),s.then(c=>{const u=Xr(this.apiClient,c),f=new yo;return Object.assign(f,u),f})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideos(n){var e,t,s,l;let a,d="",c={};if(this.apiClient.isVertexAI()){const u=fr(this.apiClient,n);return d=C("{model}:predictLongRunning",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:d,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(t=n.config)===null||t===void 0?void 0:t.abortSignal}).then(f=>f.json()),a.then(f=>nl(this.apiClient,f))}else{const u=_s(this.apiClient,n);return d=C("{model}:predictLongRunning",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:d,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=n.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=n.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>Nr(this.apiClient,f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function dl(o,n){const e={},t=i(n,["operationName"]);t!=null&&r(e,["_url","operationName"],t);const s=i(n,["config"]);return s!=null&&r(e,["config"],s),e}function cl(o,n){const e={},t=i(n,["operationName"]);t!=null&&r(e,["_url","operationName"],t);const s=i(n,["config"]);return s!=null&&r(e,["config"],s),e}function fl(o,n){const e={},t=i(n,["operationName"]);t!=null&&r(e,["operationName"],t);const s=i(n,["resourceName"]);s!=null&&r(e,["_url","resourceName"],s);const l=i(n,["config"]);return l!=null&&r(e,["config"],l),e}function pl(o,n){const e={},t=i(n,["video","uri"]);t!=null&&r(e,["uri"],t);const s=i(n,["video","encodedVideo"]);s!=null&&r(e,["videoBytes"],j(o,s));const l=i(n,["encoding"]);return l!=null&&r(e,["mimeType"],l),e}function ml(o,n){const e={},t=i(n,["_self"]);return t!=null&&r(e,["video"],pl(o,t)),e}function gl(o,n){const e={},t=i(n,["generatedSamples"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(d=>ml(o,d))),r(e,["generatedVideos"],a)}const s=i(n,["raiMediaFilteredCount"]);s!=null&&r(e,["raiMediaFilteredCount"],s);const l=i(n,["raiMediaFilteredReasons"]);return l!=null&&r(e,["raiMediaFilteredReasons"],l),e}function hl(o,n){const e={},t=i(n,["name"]);t!=null&&r(e,["name"],t);const s=i(n,["metadata"]);s!=null&&r(e,["metadata"],s);const l=i(n,["done"]);l!=null&&r(e,["done"],l);const a=i(n,["error"]);a!=null&&r(e,["error"],a);const d=i(n,["response","generateVideoResponse"]);return d!=null&&r(e,["response"],gl(o,d)),e}function yl(o,n){const e={},t=i(n,["gcsUri"]);t!=null&&r(e,["uri"],t);const s=i(n,["bytesBase64Encoded"]);s!=null&&r(e,["videoBytes"],j(o,s));const l=i(n,["mimeType"]);return l!=null&&r(e,["mimeType"],l),e}function Tl(o,n){const e={},t=i(n,["_self"]);return t!=null&&r(e,["video"],yl(o,t)),e}function Cl(o,n){const e={},t=i(n,["videos"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(d=>Tl(o,d))),r(e,["generatedVideos"],a)}const s=i(n,["raiMediaFilteredCount"]);s!=null&&r(e,["raiMediaFilteredCount"],s);const l=i(n,["raiMediaFilteredReasons"]);return l!=null&&r(e,["raiMediaFilteredReasons"],l),e}function Hn(o,n){const e={},t=i(n,["name"]);t!=null&&r(e,["name"],t);const s=i(n,["metadata"]);s!=null&&r(e,["metadata"],s);const l=i(n,["done"]);l!=null&&r(e,["done"],l);const a=i(n,["error"]);a!=null&&r(e,["error"],a);const d=i(n,["response"]);return d!=null&&r(e,["response"],Cl(o,d)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class vl extends re{constructor(n){super(),this.apiClient=n}async getVideosOperation(n){const e=n.operation,t=n.config;if(e.name===void 0||e.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=e.name.split("/operations/")[0];let l;return t&&"httpOptions"in t&&(l=t.httpOptions),this.fetchPredictVideosOperationInternal({operationName:e.name,resourceName:s,config:{httpOptions:l}})}else return this.getVideosOperationInternal({operationName:e.name,config:t})}async getVideosOperationInternal(n){var e,t,s,l;let a,d="",c={};if(this.apiClient.isVertexAI()){const u=cl(this.apiClient,n);return d=C("{operationName}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:d,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(t=n.config)===null||t===void 0?void 0:t.abortSignal}).then(f=>f.json()),a.then(f=>Hn(this.apiClient,f))}else{const u=dl(this.apiClient,n);return d=C("{operationName}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:d,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=n.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=n.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>hl(this.apiClient,f))}}async fetchPredictVideosOperationInternal(n){var e,t;let s,l="",a={};if(this.apiClient.isVertexAI()){const d=fl(this.apiClient,n);return l=C("{resourceName}:fetchPredictOperation",d._url),a=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(t=n.config)===null||t===void 0?void 0:t.abortSignal}).then(c=>c.json()),s.then(c=>Hn(this.apiClient,c))}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const El="Content-Type",_l="X-Server-Timeout",Sl="User-Agent",Il="x-goog-api-client",xl="0.14.1",Al=`google-genai-sdk/${xl}`,Ml="v1beta1",Rl="v1beta",bn=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class ut extends Error{constructor(n,e){e?super(n,{cause:e}):super(n,{cause:new Error().stack}),this.message=n,this.name="ClientError"}}class Re extends Error{constructor(n,e){e?super(n,{cause:e}):super(n,{cause:new Error().stack}),this.message=n,this.name="ServerError"}}class wl{constructor(n){var e,t;this.clientOptions=Object.assign(Object.assign({},n),{project:n.project,location:n.location,apiKey:n.apiKey,vertexai:n.vertexai});const s={};this.clientOptions.vertexai?(s.apiVersion=(e=this.clientOptions.apiVersion)!==null&&e!==void 0?e:Ml,s.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(s.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:Rl,s.baseUrl="https://generativelanguage.googleapis.com/"),s.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=s,n.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(s,n.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var n;return(n=this.clientOptions.vertexai)!==null&&n!==void 0?n:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(n){if(!n||n.baseUrl===void 0||n.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const t=[n.baseUrl.endsWith("/")?n.baseUrl.slice(0,-1):n.baseUrl];return n.apiVersion&&n.apiVersion!==""&&t.push(n.apiVersion),t.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const n=this.getBaseUrl(),e=new URL(n);return e.protocol=e.protocol=="http:"?"ws":"wss",e.toString()}setBaseUrl(n){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=n;else throw new Error("HTTP options are not correctly set.")}constructUrl(n,e,t){const s=[this.getRequestUrlInternal(e)];return t&&s.push(this.getBaseResourcePath()),n!==""&&s.push(n),new URL(`${s.join("/")}`)}shouldPrependVertexProjectPath(n){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||n.path.startsWith("projects/")||n.httpMethod==="GET"&&n.path.startsWith("publishers/google/models"))}async request(n){let e=this.clientOptions.httpOptions;n.httpOptions&&(e=this.patchHttpOptions(this.clientOptions.httpOptions,n.httpOptions));const t=this.shouldPrependVertexProjectPath(n),s=this.constructUrl(n.path,e,t);if(n.queryParams)for(const[a,d]of Object.entries(n.queryParams))s.searchParams.append(a,String(d));let l={};if(n.httpMethod==="GET"){if(n.body&&n.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=n.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,e,n.abortSignal),this.unaryApiCall(s,l,n.httpMethod)}patchHttpOptions(n,e){const t=JSON.parse(JSON.stringify(n));for(const[s,l]of Object.entries(e))typeof l=="object"?t[s]=Object.assign(Object.assign({},t[s]),l):l!==void 0&&(t[s]=l);return t}async requestStream(n){let e=this.clientOptions.httpOptions;n.httpOptions&&(e=this.patchHttpOptions(this.clientOptions.httpOptions,n.httpOptions));const t=this.shouldPrependVertexProjectPath(n),s=this.constructUrl(n.path,e,t);(!s.searchParams.has("alt")||s.searchParams.get("alt")!=="sse")&&s.searchParams.set("alt","sse");let l={};return l.body=n.body,l=await this.includeExtraHttpOptionsToRequestInit(l,e,n.abortSignal),this.streamApiCall(s,l,n.httpMethod)}async includeExtraHttpOptionsToRequestInit(n,e,t){if(e&&e.timeout||t){const s=new AbortController,l=s.signal;e.timeout&&(e==null?void 0:e.timeout)>0&&setTimeout(()=>s.abort(),e.timeout),t&&t.addEventListener("abort",()=>{s.abort()}),n.signal=l}return n.headers=await this.getHeadersInternal(e),n}async unaryApiCall(n,e,t){return this.apiCall(n.toString(),Object.assign(Object.assign({},e),{method:t})).then(async s=>(await Jn(s),new Se(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}async streamApiCall(n,e,t){return this.apiCall(n.toString(),Object.assign(Object.assign({},e),{method:t})).then(async s=>(await Jn(s),this.processStreamResponse(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}processStreamResponse(n){var e;return pe(this,arguments,function*(){const s=(e=n==null?void 0:n.body)===null||e===void 0?void 0:e.getReader(),l=new TextDecoder("utf-8");if(!s)throw new Error("Response body is empty");try{let a="";for(;;){const{done:d,value:c}=yield F(s.read());if(d){if(a.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const u=l.decode(c);try{const p=JSON.parse(u);if("error"in p){const m=JSON.parse(JSON.stringify(p.error)),g=m.status,h=m.code,T=`got status: ${g}. ${JSON.stringify(p)}`;if(h>=400&&h<500)throw new ut(T);if(h>=500&&h<600)throw new Re(T)}}catch(p){const m=p;if(m.name==="ClientError"||m.name==="ServerError")throw p}a+=u;let f=a.match(bn);for(;f;){const p=f[1];try{const m=new Response(p,{headers:n==null?void 0:n.headers,status:n==null?void 0:n.status,statusText:n==null?void 0:n.statusText});yield yield F(new Se(m)),a=a.slice(f[0].length),f=a.match(bn)}catch(m){throw new Error(`exception parsing stream chunk ${p}. ${m}`)}}}}finally{s.releaseLock()}})}async apiCall(n,e){return fetch(n,e).catch(t=>{throw new Error(`exception ${t} sending request`)})}getDefaultHeaders(){const n={},e=Al+" "+this.clientOptions.userAgentExtra;return n[Sl]=e,n[Il]=e,n[El]="application/json",n}async getHeadersInternal(n){const e=new Headers;if(n&&n.headers){for(const[t,s]of Object.entries(n.headers))e.append(t,s);n.timeout&&n.timeout>0&&e.append(_l,String(Math.ceil(n.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(e),e}async uploadFile(n,e){var t;const s={};e!=null&&(s.mimeType=e.mimeType,s.name=e.name,s.displayName=e.displayName),s.name&&!s.name.startsWith("files/")&&(s.name=`files/${s.name}`);const l=this.clientOptions.uploader,a=await l.stat(n);s.sizeBytes=String(a.size);const d=(t=e==null?void 0:e.mimeType)!==null&&t!==void 0?t:a.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");s.mimeType=d;const c=await this.fetchUploadUrl(s,e);return l.upload(n,c,this)}async downloadFile(n){await this.clientOptions.downloader.download(n,this)}async fetchUploadUrl(n,e){var t;let s={};e!=null&&e.httpOptions?s=e.httpOptions:s={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${n.mimeType}`}};const l={file:n},a=await this.request({path:C("upload/v1beta/files",l._url),body:JSON.stringify(l),httpMethod:"POST",httpOptions:s});if(!a||!(a!=null&&a.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const d=(t=a==null?void 0:a.headers)===null||t===void 0?void 0:t["x-goog-upload-url"];if(d===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return d}}async function Jn(o){var n;if(o===void 0)throw new Re("response is undefined");if(!o.ok){const e=o.status,t=o.statusText;let s;!((n=o.headers.get("content-type"))===null||n===void 0)&&n.includes("application/json")?s=await o.json():s={error:{message:await o.text(),code:o.status,status:o.statusText}};const l=`got status: ${e} ${t}. ${JSON.stringify(s)}`;throw e>=400&&e<500?new ut(l):e>=500&&e<600?new Re(l):new Error(l)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Pl(o,n){const e={},t=i(n,["name"]);t!=null&&r(e,["_url","name"],t);const s=i(n,["config"]);return s!=null&&r(e,["config"],s),e}function Nl(o,n,e){const t={},s=i(n,["pageSize"]);e!==void 0&&s!=null&&r(e,["_query","pageSize"],s);const l=i(n,["pageToken"]);e!==void 0&&l!=null&&r(e,["_query","pageToken"],l);const a=i(n,["filter"]);return e!==void 0&&a!=null&&r(e,["_query","filter"],a),t}function Dl(o,n){const e={},t=i(n,["config"]);return t!=null&&r(e,["config"],Nl(o,t,e)),e}function Vl(o,n){const e={},t=i(n,["textInput"]);t!=null&&r(e,["textInput"],t);const s=i(n,["output"]);return s!=null&&r(e,["output"],s),e}function Ll(o,n){const e={};if(i(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=i(n,["examples"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(l=>Vl(o,l))),r(e,["examples","examples"],s)}return e}function Ul(o,n,e){const t={};if(i(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const s=i(n,["tunedModelDisplayName"]);if(e!==void 0&&s!=null&&r(e,["displayName"],s),i(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const l=i(n,["epochCount"]);e!==void 0&&l!=null&&r(e,["tuningTask","hyperparameters","epochCount"],l);const a=i(n,["learningRateMultiplier"]);if(a!=null&&r(t,["tuningTask","hyperparameters","learningRateMultiplier"],a),i(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(i(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const d=i(n,["batchSize"]);e!==void 0&&d!=null&&r(e,["tuningTask","hyperparameters","batchSize"],d);const c=i(n,["learningRate"]);return e!==void 0&&c!=null&&r(e,["tuningTask","hyperparameters","learningRate"],c),t}function Fl(o,n){const e={},t=i(n,["baseModel"]);t!=null&&r(e,["baseModel"],t);const s=i(n,["trainingDataset"]);s!=null&&r(e,["tuningTask","trainingData"],Ll(o,s));const l=i(n,["config"]);return l!=null&&r(e,["config"],Ul(o,l,e)),e}function kl(o,n){const e={},t=i(n,["name"]);t!=null&&r(e,["_url","name"],t);const s=i(n,["config"]);return s!=null&&r(e,["config"],s),e}function Gl(o,n,e){const t={},s=i(n,["pageSize"]);e!==void 0&&s!=null&&r(e,["_query","pageSize"],s);const l=i(n,["pageToken"]);e!==void 0&&l!=null&&r(e,["_query","pageToken"],l);const a=i(n,["filter"]);return e!==void 0&&a!=null&&r(e,["_query","filter"],a),t}function ql(o,n){const e={},t=i(n,["config"]);return t!=null&&r(e,["config"],Gl(o,t,e)),e}function Bl(o,n,e){const t={},s=i(n,["gcsUri"]);if(e!==void 0&&s!=null&&r(e,["supervisedTuningSpec","trainingDatasetUri"],s),i(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return t}function Hl(o,n){const e={},t=i(n,["gcsUri"]);return t!=null&&r(e,["validationDatasetUri"],t),e}function bl(o,n,e){const t={},s=i(n,["validationDataset"]);e!==void 0&&s!=null&&r(e,["supervisedTuningSpec"],Hl(o,s));const l=i(n,["tunedModelDisplayName"]);e!==void 0&&l!=null&&r(e,["tunedModelDisplayName"],l);const a=i(n,["description"]);e!==void 0&&a!=null&&r(e,["description"],a);const d=i(n,["epochCount"]);e!==void 0&&d!=null&&r(e,["supervisedTuningSpec","hyperParameters","epochCount"],d);const c=i(n,["learningRateMultiplier"]);e!==void 0&&c!=null&&r(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],c);const u=i(n,["exportLastCheckpointOnly"]);e!==void 0&&u!=null&&r(e,["supervisedTuningSpec","exportLastCheckpointOnly"],u);const f=i(n,["adapterSize"]);if(e!==void 0&&f!=null&&r(e,["supervisedTuningSpec","hyperParameters","adapterSize"],f),i(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(i(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return t}function Jl(o,n){const e={},t=i(n,["baseModel"]);t!=null&&r(e,["baseModel"],t);const s=i(n,["trainingDataset"]);s!=null&&r(e,["supervisedTuningSpec","trainingDatasetUri"],Bl(o,s,e));const l=i(n,["config"]);return l!=null&&r(e,["config"],bl(o,l,e)),e}function $l(o,n){const e={},t=i(n,["name"]);t!=null&&r(e,["model"],t);const s=i(n,["name"]);return s!=null&&r(e,["endpoint"],s),e}function dt(o,n){const e={},t=i(n,["name"]);t!=null&&r(e,["name"],t);const s=i(n,["state"]);s!=null&&r(e,["state"],nt(o,s));const l=i(n,["createTime"]);l!=null&&r(e,["createTime"],l);const a=i(n,["tuningTask","startTime"]);a!=null&&r(e,["startTime"],a);const d=i(n,["tuningTask","completeTime"]);d!=null&&r(e,["endTime"],d);const c=i(n,["updateTime"]);c!=null&&r(e,["updateTime"],c);const u=i(n,["description"]);u!=null&&r(e,["description"],u);const f=i(n,["baseModel"]);f!=null&&r(e,["baseModel"],f);const p=i(n,["_self"]);p!=null&&r(e,["tunedModel"],$l(o,p));const m=i(n,["distillationSpec"]);m!=null&&r(e,["distillationSpec"],m);const g=i(n,["experiment"]);g!=null&&r(e,["experiment"],g);const h=i(n,["labels"]);h!=null&&r(e,["labels"],h);const T=i(n,["pipelineJob"]);T!=null&&r(e,["pipelineJob"],T);const v=i(n,["tunedModelDisplayName"]);return v!=null&&r(e,["tunedModelDisplayName"],v),e}function Yl(o,n){const e={},t=i(n,["nextPageToken"]);t!=null&&r(e,["nextPageToken"],t);const s=i(n,["tunedModels"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(a=>dt(o,a))),r(e,["tuningJobs"],l)}return e}function Kl(o,n){const e={},t=i(n,["name"]);t!=null&&r(e,["name"],t);const s=i(n,["metadata"]);s!=null&&r(e,["metadata"],s);const l=i(n,["done"]);l!=null&&r(e,["done"],l);const a=i(n,["error"]);return a!=null&&r(e,["error"],a),e}function Wl(o,n){const e={},t=i(n,["checkpointId"]);t!=null&&r(e,["checkpointId"],t);const s=i(n,["epoch"]);s!=null&&r(e,["epoch"],s);const l=i(n,["step"]);l!=null&&r(e,["step"],l);const a=i(n,["endpoint"]);return a!=null&&r(e,["endpoint"],a),e}function zl(o,n){const e={},t=i(n,["model"]);t!=null&&r(e,["model"],t);const s=i(n,["endpoint"]);s!=null&&r(e,["endpoint"],s);const l=i(n,["checkpoints"]);if(l!=null){let a=l;Array.isArray(a)&&(a=a.map(d=>Wl(o,d))),r(e,["checkpoints"],a)}return e}function we(o,n){const e={},t=i(n,["name"]);t!=null&&r(e,["name"],t);const s=i(n,["state"]);s!=null&&r(e,["state"],nt(o,s));const l=i(n,["createTime"]);l!=null&&r(e,["createTime"],l);const a=i(n,["startTime"]);a!=null&&r(e,["startTime"],a);const d=i(n,["endTime"]);d!=null&&r(e,["endTime"],d);const c=i(n,["updateTime"]);c!=null&&r(e,["updateTime"],c);const u=i(n,["error"]);u!=null&&r(e,["error"],u);const f=i(n,["description"]);f!=null&&r(e,["description"],f);const p=i(n,["baseModel"]);p!=null&&r(e,["baseModel"],p);const m=i(n,["tunedModel"]);m!=null&&r(e,["tunedModel"],zl(o,m));const g=i(n,["supervisedTuningSpec"]);g!=null&&r(e,["supervisedTuningSpec"],g);const h=i(n,["tuningDataStats"]);h!=null&&r(e,["tuningDataStats"],h);const T=i(n,["encryptionSpec"]);T!=null&&r(e,["encryptionSpec"],T);const v=i(n,["partnerModelTuningSpec"]);v!=null&&r(e,["partnerModelTuningSpec"],v);const S=i(n,["distillationSpec"]);S!=null&&r(e,["distillationSpec"],S);const x=i(n,["experiment"]);x!=null&&r(e,["experiment"],x);const R=i(n,["labels"]);R!=null&&r(e,["labels"],R);const I=i(n,["pipelineJob"]);I!=null&&r(e,["pipelineJob"],I);const M=i(n,["tunedModelDisplayName"]);return M!=null&&r(e,["tunedModelDisplayName"],M),e}function Ol(o,n){const e={},t=i(n,["nextPageToken"]);t!=null&&r(e,["nextPageToken"],t);const s=i(n,["tuningJobs"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(a=>we(o,a))),r(e,["tuningJobs"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ql extends re{constructor(n){super(),this.apiClient=n,this.get=async e=>await this.getInternal(e),this.list=async(e={})=>new he(oe.PAGED_ITEM_TUNING_JOBS,t=>this.listInternal(t),await this.listInternal(e),e),this.tune=async e=>{if(this.apiClient.isVertexAI())return await this.tuneInternal(e);{const t=await this.tuneMldevInternal(e);let s="";return t.metadata!==void 0&&t.metadata.tunedModel!==void 0?s=t.metadata.tunedModel:t.name!==void 0&&t.name.includes("/operations/")&&(s=t.name.split("/operations/")[0]),{name:s,state:_e.JOB_STATE_QUEUED}}}}async getInternal(n){var e,t,s,l;let a,d="",c={};if(this.apiClient.isVertexAI()){const u=kl(this.apiClient,n);return d=C("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:d,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(t=n.config)===null||t===void 0?void 0:t.abortSignal}).then(f=>f.json()),a.then(f=>we(this.apiClient,f))}else{const u=Pl(this.apiClient,n);return d=C("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:d,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=n.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=n.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>dt(this.apiClient,f))}}async listInternal(n){var e,t,s,l;let a,d="",c={};if(this.apiClient.isVertexAI()){const u=ql(this.apiClient,n);return d=C("tuningJobs",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:d,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(t=n.config)===null||t===void 0?void 0:t.abortSignal}).then(f=>f.json()),a.then(f=>{const p=Ol(this.apiClient,f),m=new wn;return Object.assign(m,p),m})}else{const u=Dl(this.apiClient,n);return d=C("tunedModels",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:d,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=n.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=n.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>{const p=Yl(this.apiClient,f),m=new wn;return Object.assign(m,p),m})}}async tuneInternal(n){var e,t;let s,l="",a={};if(this.apiClient.isVertexAI()){const d=Jl(this.apiClient,n);return l=C("tuningJobs",d._url),a=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(t=n.config)===null||t===void 0?void 0:t.abortSignal}).then(c=>c.json()),s.then(c=>we(this.apiClient,c))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(n){var e,t;let s,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Fl(this.apiClient,n);return l=C("tunedModels",d._url),a=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(t=n.config)===null||t===void 0?void 0:t.abortSignal}).then(c=>c.json()),s.then(c=>Kl(this.apiClient,c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Xl{async download(n,e){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const Zl=1024*1024*8,jl=3,ea=1e3,na=2,ve="x-goog-upload-status";async function ta(o,n,e){var t,s,l;let a=0,d=0,c=new Se(new Response),u="upload";for(a=o.size;d<a;){const p=Math.min(Zl,a-d),m=o.slice(d,d+p);d+p>=a&&(u+=", finalize");let g=0,h=ea;for(;g<jl&&(c=await e.request({path:"",body:m,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:n,headers:{"X-Goog-Upload-Command":u,"X-Goog-Upload-Offset":String(d),"Content-Length":String(p)}}}),!(!((t=c==null?void 0:c.headers)===null||t===void 0)&&t[ve]));)g++,await ia(h),h=h*na;if(d+=p,((s=c==null?void 0:c.headers)===null||s===void 0?void 0:s[ve])!=="active")break;if(a<=d)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const f=await(c==null?void 0:c.json());if(((l=c==null?void 0:c.headers)===null||l===void 0?void 0:l[ve])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return f.file}async function oa(o){return{size:o.size,type:o.type}}function ia(o){return new Promise(n=>setTimeout(n,o))}class sa{async upload(n,e,t){if(typeof n=="string")throw new Error("File path is not supported in browser uploader.");return await ta(n,e,t)}async stat(n){if(typeof n=="string")throw new Error("File path is not supported in browser uploader.");return await oa(n)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ra{create(n,e,t){return new la(n,e,t)}}class la{constructor(n,e,t){this.url=n,this.headers=e,this.callbacks=t}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(n){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(n)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const $n="x-goog-api-key";class aa{constructor(n){this.apiKey=n}async addAuthHeaders(n){n.get($n)===null&&n.append($n,this.apiKey)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ua="gl-node/";class da{constructor(n){var e;if(n.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(n.project||n.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(e=n.vertexai)!==null&&e!==void 0?e:!1,this.apiKey=n.apiKey;const t=Tt(n,void 0,void 0);t&&(n.httpOptions?n.httpOptions.baseUrl=t:n.httpOptions={baseUrl:t}),this.apiVersion=n.apiVersion;const s=new aa(this.apiKey);this.apiClient=new wl({auth:s,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:n.httpOptions,userAgentExtra:ua+"web",uploader:new sa,downloader:new Xl}),this.models=new ul(this.apiClient),this.live=new il(this.apiClient,s,new ra),this.chats=new Ao(this.models,this.apiClient),this.caches=new _o(this.apiClient),this.files=new qo(this.apiClient),this.operations=new vl(this.apiClient),this.tunings=new Ql(this.apiClient)}}const Yn=w.lazy(()=>zn(()=>import("./RatingModal-CmQeyBc8.js"),__vite__mapDeps([0,1]))),Kn=w.lazy(()=>zn(()=>import("./OutOfStockModal-DSCZcwLv.js"),__vite__mapDeps([2,1,3]))),ca={125:"https://i.postimg.cc/2SStjVmC/frr.png",100:"https://i.postimg.cc/k6pvPJh9/1.png",75:"https://i.postimg.cc/Jz0HKgvJ/75-sweet.png",50:"https://i.postimg.cc/LYb3F90F/2.png",25:"https://i.postimg.cc/LYb3F90F/2.png",0:"https://i.postimg.cc/r0PN2VYX/3.png"},ya=()=>{const{cart:o,navigateTo:n,clearCart:e,getTranslation:t,getSizeTranslation:s,groupedProducts:l,logEvent:a,isGeneratingQR:d,setIsGeneratingQR:c,omniContext:u,aiDecision:f,setAiDecision:p,markOutOfStock:m,removeFromCart:g,selectedLanguage:h}=Wn(),[T,v]=w.useState(!1),[S,x]=w.useState(new Set),{showToast:R}=ft(),[I,M]=w.useState(!1),[z,O]=w.useState(!1),[k,Q]=w.useState({isOpen:!1,productName:""}),L=w.useRef(0),Y=w.useRef(null),ee=w.useRef(null),J=w.useRef(null),D=w.useMemo(()=>{const _={};return o.forEach(E=>{const P=E.selectedAddons.map(U=>U.id).sort().join(","),A=`${E.productGroupId}_${E.variant.Product_Code||E.variant.Name_EN}_${E.selectedSize}_${E.selectedSweetness}_${P}`;_[A]||(_[A]={key:A,representative:E,quantity:0,uniqcodes:[],ids:[]}),_[A].quantity+=1,_[A].uniqcodes.push(E.variant.Uniqcode||""),_[A].ids.push(E.id)}),Object.values(_)},[o]);w.useEffect(()=>{if(d){const _=setTimeout(()=>{c(!1)},500);return()=>clearTimeout(_)}},[d,c]),w.useEffect(()=>{z&&o.length>0&&S.size===0&&(pt(),v(!0))},[z,o.length,S.size]),w.useEffect(()=>{var E;const _=sessionStorage.getItem("rainWarningShown");(E=u==null?void 0:u.weather)!=null&&E.toLowerCase().includes("rain")&&!_&&(R(t("weatherWarningRainLater"),"info"),sessionStorage.setItem("rainWarningShown","true"))},[u,R,t]);const ne=w.useCallback(async()=>{var P,A,U,B,H,K;const _=["th","my","vn"].includes(h);if(window.speechSynthesis.cancel(),J.current){try{J.current.stop()}catch{}J.current=null}if(!("speechSynthesis"in window)&&!_||o.length===0)return;const E=o.length===1?t("singleItemInstructions"):t("multipleItemsInstructions");if(_){if(!ee.current)try{ee.current=new(window.AudioContext||window.webkitAudioContext)({sampleRate:24e3})}catch(V){console.error("Could not create AudioContext for TTS",V);return}M(!0);try{const W=(K=(H=(B=(U=(A=(P=(await new da({apiKey:void 0}).models.generateContent({model:"gemini-2.5-flash-preview-tts",contents:[{parts:[{text:E}]}],config:{responseModalities:[se.AUDIO]}})).candidates)==null?void 0:P[0])==null?void 0:A.content)==null?void 0:U.parts)==null?void 0:B[0])==null?void 0:H.inlineData)==null?void 0:K.data;if(W&&ee.current){const b=ee.current,$=await pa(fa(W),b,24e3,1),G=b.createBufferSource();J.current=G,G.buffer=$,G.connect(b.destination),G.onended=()=>{M(!1),J.current=null},G.start()}else M(!1)}catch(V){console.error("Gemini TTS Error:",V),M(!1)}}else{const V=new SpeechSynthesisUtterance(E),te={th:"th-TH",en:"en-US",jp:"ja-JP",zh:"zh-CN",kr:"ko-KR",my:"ms-MY",ru:"ru-RU",fr:"fr-FR",vn:"vi-VN",in:"hi-IN"};V.lang=te[h]||"en-US",V.onstart=()=>M(!0),V.onend=()=>M(!1),V.onerror=()=>M(!1);const W=()=>{window.speechSynthesis.onvoiceschanged=null;const b=window.speechSynthesis.getVoices();if(b.length>0){let $=b.find(G=>G.lang===V.lang);$||($=b.find(G=>G.lang.startsWith(h))),$&&(V.voice=$)}window.speechSynthesis.speak(V)};window.speechSynthesis.getVoices().length>0?W():window.speechSynthesis.onvoiceschanged=W}},[o.length,t,h]);w.useEffect(()=>()=>{if(window.speechSynthesis.cancel(),window.speechSynthesis.onvoiceschanged=null,J.current){try{J.current.stop()}catch{}J.current=null}},[]);const De=w.useCallback(_=>{if(v(!1),o.length>0&&S.size===0){const E=new Set;let P={};f&&(P={aiFollowed:f==="accepted"?"Y":"N"},p(null)),o.forEach(A=>{const U=l.find(B=>B.id===A.productGroupId);if(U){const B=E.size===0?{cartItem:A,productGroup:U,feedback:_||void 0,...P}:{cartItem:A,productGroup:U,feedback:_||void 0};a("ORDER_CONFIRMED",B),E.add(A.id)}else console.error(`Could not find product group for cart item ID ${A.id} to log order.`)}),x(E)}ne()},[o,S,l,a,f,p,ne]),Ve=()=>{mt(),e(),x(new Set),O(!1),n(Ce.Menu)},Le=D[0],Ue=(_=0)=>{if(Y.current&&clearTimeout(Y.current),L.current+=1,L.current>=3){const E=D[_];if(E){const P=l.find(A=>A.id===E.representative.productGroupId);if(P){const A=P.displayName(h);m(E.representative.productGroupId),Q({isOpen:!0,productName:A,idsToRemove:E.ids})}}L.current=0}else Y.current=window.setTimeout(()=>{L.current=0},800)},Fe=w.useCallback(()=>{k.idsToRemove&&k.idsToRemove.forEach(_=>g(_)),Q({isOpen:!1,productName:""}),n(Ce.Menu)},[k,g,n]),ct=o.reduce((_,E)=>_+E.customizedPrice,0);if(!z&&o.length>0)return y.jsxs("div",{className:"fixed inset-0 bg-stone-100 pt-[60px] pb-[90px] flex flex-col z-10 animate-fadeIn",children:[y.jsxs("div",{className:"px-4 py-3 bg-white shadow-sm z-20 flex items-center justify-between",children:[y.jsx("h2",{className:"text-xl font-bold heading-font text-neutral-900",children:t("orderSummaryTitle")}),y.jsxs("span",{className:"text-sm text-stone-500 font-medium bg-stone-100 px-2 py-1 rounded-md",children:[o.length," ",t("totalItemsLabel")]})]}),y.jsx("div",{className:"flex-grow overflow-y-auto p-4 space-y-3",children:D.map(_=>{const{representative:E,quantity:P,key:A}=_,U=l.find(K=>K.id===E.productGroupId),B=U?U.displayName(h):E.variant.Name_TH,H=E.customizedPrice*P;return y.jsxs("div",{className:"bg-white p-3 rounded-xl shadow-sm border border-stone-200 flex gap-3 items-start",children:[y.jsxs("div",{className:"w-16 h-20 rounded-lg bg-stone-200 overflow-hidden flex-shrink-0 border border-stone-100 relative",children:[y.jsx(Ge,{url:E.variant.Image_URL,altText:"",type:"preview"}),P>1&&y.jsxs("div",{className:"absolute bottom-0 right-0 bg-red-500 text-white text-[10px] font-bold px-1.5 py-0.5 rounded-tl-md",children:["x",P]})]}),y.jsxs("div",{className:"flex-grow min-w-0",children:[y.jsxs("div",{className:"flex justify-between items-start gap-2",children:[y.jsx("h3",{className:"font-bold text-sm text-neutral-800 line-clamp-1",children:B}),y.jsxs("span",{className:"font-bold text-sm text-[var(--day-accent)] whitespace-nowrap",children:["",H.toFixed(2)]})]}),y.jsxs("div",{className:"mt-1 space-y-0.5",children:[y.jsxs("p",{className:"text-xs text-stone-500",children:[y.jsx("span",{className:"font-medium",children:t((E.variant.Type||"").toLowerCase())}),y.jsx("span",{className:"mx-1 text-stone-300",children:"|"}),y.jsx("span",{children:s(E.selectedSize)})]}),y.jsxs("p",{className:"text-xs text-stone-500",children:[t("sweetnessLabel").replace(" ",""),": ",y.jsxs("span",{className:"font-medium text-neutral-700",children:[E.selectedSweetness||"0","%"]})]}),E.selectedAddons.length>0&&y.jsxs("p",{className:"text-xs text-stone-500 truncate",children:["+ ",E.selectedAddons.map(K=>K.name).join(", ")]})]})]})]},A)})}),y.jsxs("div",{className:"fixed bottom-0 left-0 right-0 p-4 bg-white border-t border-stone-200 z-30 shadow-[0_-4px_10px_rgba(0,0,0,0.05)]",children:[y.jsxs("div",{className:"flex justify-between items-center mb-3 px-1",children:[y.jsx("span",{className:"font-bold text-lg text-neutral-700",children:t("totalLabel")}),y.jsxs("span",{className:"font-bold text-3xl text-[var(--day-accent)]",children:["",ct.toFixed(2)]})]}),y.jsxs("div",{className:"flex gap-3",children:[y.jsx("button",{onClick:()=>n(Ce.Menu),className:"secondary-button py-3 px-4 flex-1 text-sm font-semibold",children:t("addAnotherItemButton")}),y.jsx("button",{onClick:()=>O(!0),className:"accent-button py-3 px-4 flex-[2] text-base shadow-lg shadow-emerald-500/20",children:t("confirmOrderButton")})]})]})]});const ke=_=>y.jsx("div",{className:"flex-shrink-0 px-4 pt-2 pb-1 z-20",children:y.jsx("div",{className:"bg-white/90 backdrop-blur-md py-2 px-4 rounded-2xl shadow-sm border border-white/50 mx-auto w-fit max-w-full",children:y.jsxs("div",{className:"flex items-center gap-2 justify-center",children:[y.jsx("p",{className:"font-bold text-neutral-800 text-sm sm:text-base text-center leading-tight",children:t(_?"singleItemInstructions":"multipleItemsInstructions")}),I&&y.jsxs("div",{className:"flex gap-1 items-end h-3 flex-shrink-0 ml-1",children:[y.jsx("span",{className:"w-0.5 bg-[var(--bdl-brand)] animate-speaking-bar",style:{animationDelay:"0s"}}),y.jsx("span",{className:"w-0.5 bg-[var(--bdl-brand)] animate-speaking-bar",style:{animationDelay:"0.2s"}}),y.jsx("span",{className:"w-0.5 bg-[var(--bdl-brand)] animate-speaking-bar",style:{animationDelay:"0.4s"}})]})]})})});if(D.length>1)return y.jsxs("div",{className:"fixed inset-0 bg-stone-100 flex flex-col z-50 animate-fadeIn h-[100dvh]",children:[y.jsx("div",{className:"h-[60px] flex-shrink-0"}),y.jsxs(w.Suspense,{fallback:null,children:[T&&y.jsx(Yn,{isOpen:T,onComplete:De}),k.isOpen&&y.jsx(Kn,{isOpen:k.isOpen,onClose:Fe,productName:k.productName})]}),ke(!1),y.jsx("div",{className:"flex-grow px-2 py-2 overflow-y-auto md:overflow-hidden flex flex-col items-center justify-center",children:y.jsx("div",{className:`grid w-full max-w-3xl mx-auto gap-2 h-full max-h-full
                ${D.length<=2?"grid-cols-1 sm:grid-cols-2 grid-rows-2 sm:grid-rows-1":""}
                ${D.length>2&&D.length<=4?"grid-cols-2 grid-rows-2":""}
                ${D.length>4?"grid-cols-2 sm:grid-cols-3":""}
            `,children:D.map((_,E)=>{const{representative:P,quantity:A,key:U,uniqcodes:B}=_,H=l.find(Te=>Te.id===P.productGroupId),K=H?H.displayName("th"):P.variant.Name_TH,V=(P.variant.Type||"").toLowerCase(),te=s(P.selectedSize),W=P.selectedSweetness,b=W?`${W}%`:t("none","th"),$=P.selectedAddons.length>0?"+"+P.selectedAddons.map(Te=>Te.name).join(","):null,G=B.join(",");return y.jsxs("div",{className:"bg-white p-2 rounded-xl shadow-sm border border-stone-200 relative flex flex-col items-center justify-center h-full min-h-[140px]",children:[y.jsx("div",{className:"absolute top-1 left-1 z-20",children:y.jsxs("span",{className:"bg-stone-700 text-white font-bold px-1.5 py-0.5 rounded-md text-[10px] shadow-sm",children:["#",E+1]})}),A>1&&y.jsx("div",{className:"absolute top-1 right-1 z-20",children:y.jsxs("span",{className:"bg-red-600 text-white font-extrabold px-3 py-1 rounded-lg text-xl shadow-md border-2 border-white/20",children:["x",A]})}),y.jsx("div",{className:"flex-grow flex items-center justify-center w-full p-1 max-h-[65%]",children:y.jsx("div",{className:"aspect-square h-full max-w-full flex items-center justify-center",children:y.jsx(qe,{text:G,size:256,brand:H==null?void 0:H.brand})})}),y.jsxs("div",{className:"w-full mt-1 text-center",children:[y.jsx("h3",{className:"font-bold text-xs text-neutral-800 truncate px-1 leading-tight",children:K}),y.jsxs("div",{className:"flex justify-center items-center gap-1 text-[10px] text-stone-500 mt-1 leading-none items-center",children:[y.jsx("span",{children:t(V,"th")}),y.jsx("span",{children:""}),y.jsx("span",{children:te}),y.jsx("span",{className:"ml-0.5 bg-yellow-100 text-yellow-900 px-1.5 py-0.5 rounded font-extrabold text-sm border border-yellow-300 shadow-sm",children:b})]}),$&&y.jsx("p",{className:"text-[9px] text-stone-400 truncate mt-0.5",children:$})]}),y.jsx("div",{className:"absolute inset-0 z-10",onClick:()=>Ue(E)})]},U)})})}),y.jsx("div",{className:"flex-shrink-0 p-3 bg-white border-t border-stone-200 z-30 flex justify-center pb-safe-area",children:y.jsx("button",{onClick:Ve,className:"w-full max-w-sm accent-button py-3 px-6 shadow-md text-base",children:t("newOrderButton")})})]});if(D.length===1&&Le){const{representative:_,quantity:E,uniqcodes:P}=Le,A=l.find(G=>G.id===_.productGroupId),U=A?A.displayName("th"):_.variant.Name_TH,B=(_.variant.Type||"").toLowerCase(),H=t(B,"th"),K=s(_.selectedSize),V=_.selectedSweetness,te=V?`${V}%`:t("none","th"),W=_.selectedAddons.length>0?_.selectedAddons.map(G=>G.name).join(", "):t("none","th"),b=ca[V||"0"],$=P.join(",");return y.jsxs("div",{className:"fixed inset-0 bg-stone-100 flex flex-col z-50 animate-fadeIn h-[100dvh]",children:[y.jsx("div",{className:"h-[60px] flex-shrink-0"}),y.jsxs(w.Suspense,{fallback:null,children:[T&&y.jsx(Yn,{isOpen:T,onComplete:De}),k.isOpen&&y.jsx(Kn,{isOpen:k.isOpen,onClose:Fe,productName:k.productName})]}),ke(!0),y.jsx("div",{className:"flex-grow px-4 py-2 flex flex-col items-center justify-center overflow-hidden",children:y.jsxs("div",{className:"w-full max-w-md bg-white rounded-2xl shadow-xl overflow-hidden flex flex-col max-h-full border border-stone-200 relative",children:[y.jsxs("div",{className:"flex p-4 gap-3 bg-stone-50 border-b border-stone-100 flex-shrink-0 items-center",children:[y.jsx("div",{className:"w-16 h-16 rounded-lg bg-stone-200 overflow-hidden flex-shrink-0 border border-stone-200 relative",children:y.jsx(Ge,{url:_.variant.Image_URL,altText:U,type:"preview",priority:!0})}),y.jsxs("div",{className:"flex-grow min-w-0 flex flex-col justify-center",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("h2",{className:"font-bold text-lg text-neutral-800 leading-tight truncate flex-1",children:U}),E>1&&y.jsxs("span",{className:"bg-red-600 text-white font-extrabold px-3 py-1 rounded-lg text-xl shadow-sm flex-shrink-0",children:["x",E," "]})]}),y.jsxs("div",{className:"text-xs text-stone-600 mt-1 flex flex-wrap gap-x-3 items-center",children:[y.jsx("span",{children:H}),y.jsx("span",{children:K}),y.jsxs("span",{className:"flex items-center gap-1",children:[t("sweetnessLabel","th").replace(" ",""),":",y.jsx("span",{className:"bg-yellow-100 text-yellow-900 px-2 py-0.5 rounded-md font-extrabold text-lg border border-yellow-300 shadow-sm",children:te})]})]}),_.selectedAddons.length>0&&y.jsxs("p",{className:"text-[10px] text-stone-500 truncate mt-1",children:["+ ",W]})]}),b&&y.jsx("div",{className:"w-10 flex-shrink-0 flex items-center justify-center opacity-80",children:y.jsx("img",{src:b,alt:"",className:"max-w-full h-auto object-contain"})})]}),y.jsxs("div",{className:"flex-grow flex flex-col items-center justify-center p-6 bg-white relative",onClick:()=>Ue(0),children:[y.jsx("div",{className:"w-full max-w-[280px] aspect-square flex items-center justify-center bg-white p-1",children:y.jsx(qe,{text:$,size:300,brand:A==null?void 0:A.brand})}),E>1?y.jsxs("div",{className:"mt-4 text-center",children:[y.jsxs("p",{className:"text-red-600 font-bold text-lg animate-pulse",children:[" ",E," Items in this QR"]}),y.jsx("p",{className:"text-[10px] text-stone-300 italic mt-1",children:t("staffTapHint")})]}):y.jsx("p",{className:"text-[10px] text-stone-300 mt-4 italic",children:t("staffTapHint")})]})]})}),y.jsx("div",{className:"flex-shrink-0 p-4 bg-white/80 backdrop-blur-md border-t border-stone-200 z-30 pb-safe-area",children:y.jsx("button",{onClick:Ve,className:"w-full accent-button py-3 px-6 shadow-lg text-lg",children:t("newOrderButton")})})]})}return null};function fa(o){const n=atob(o),e=n.length,t=new Uint8Array(e);for(let s=0;s<e;s++)t[s]=n.charCodeAt(s);return t}async function pa(o,n,e,t){const s=new Int16Array(o.buffer),l=s.length/t,a=n.createBuffer(t,l,e);for(let d=0;d<t;d++){const c=a.getChannelData(d);for(let u=0;u<l;u++)c[u]=s[u*t+d]/32768}return a}export{ya as default};
